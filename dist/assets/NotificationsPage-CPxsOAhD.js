import{j as e,r as t,m as B,k as M,B as r,C as A,T as a,R as T}from"./index-TH8YGKRz.js";import{A as S,D as L}from"./AdminSidebar-Bc6icHTo.js";import{u as P,D as O}from"./Divider-7QTrz6EV.js";import{I as H}from"./IconButton-BAp8iDOQ.js";import{A as U}from"./ArrowBack-BmJ3uh7B.js";import{c as F}from"./createSvgIcon-1GfyKPJS.js";import{C}from"./Chip-DQa8OeN4.js";import{B as k}from"./Button-CJZqiG46.js";import{A as J}from"./Alert-DkG2QiTi.js";import{P as I}from"./Paper-Mdtt8qvf.js";import{L as Q}from"./Menu-CzX3FVwN.js";import{L as V,a as Y,b as q}from"./ListItemText-DxyF1s_P.js";import"./useControlled-BLQOo7Av.js";import"./createSvgIcon-B0Pm_6cI.js";import"./Avatar-BgeWc8dC.js";import"./useSlot-B20WKvL2.js";import"./resolveComponentProps-CAz9EWAT.js";import"./getThemeProps-DA88l0eV.js";const d=F(e.jsx("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2m6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5z"}),"NotificationsNone"),me=()=>{const[n,l]=t.useState([]),[z,m]=t.useState(!0),[h,f]=t.useState(""),[D,p]=t.useState(!1),[g,u]=t.useState(null),R=B(),w=P(R.breakpoints.down("md")),j=M(),i=JSON.parse(localStorage.getItem("user")||"{}"),b=i.role||"MEMBER",y=i.name||"User",v=i.avatarUrl||i.avatar||"",N=async()=>{try{m(!0),f(""),l([])}catch(s){console.error("Error fetching notifications:",s),f("Failed to load notifications")}finally{m(!1)}},E=async s=>{try{u(s),l(o=>o.map(x=>x.id===s?{...x,unread:!1}:x))}catch(o){console.error("Error marking notification as read:",o)}finally{u(null)}},W=async()=>{try{l(s=>s.map(o=>({...o,unread:!1})))}catch(s){console.error("Error marking all notifications as read:",s)}};t.useEffect(()=>{N()},[]);const c=n.filter(s=>s.unread).length;return z?e.jsx(r,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh"},children:e.jsx(A,{})}):e.jsxs(r,{sx:{display:"flex",minHeight:"100vh",bgcolor:"#f7f8fa"},children:[e.jsx(r,{sx:{display:{xs:"none",md:"block"}},children:e.jsx(S,{userRole:b,currentTab:"notifications",onSignOut:()=>j("/login"),userName:y,avatarUrl:v})}),e.jsx(L,{open:D,onClose:()=>p(!1),PaperProps:{sx:{width:240}},children:e.jsx(S,{userRole:b,currentTab:"notifications",onSignOut:()=>j("/login"),isDrawer:!0,userName:y,avatarUrl:v})}),e.jsxs(r,{sx:{flex:1,display:"flex",flexDirection:"column",ml:{xs:0,md:"220px"}},children:[e.jsx(r,{sx:{bgcolor:"#fff",borderBottom:"1px solid #e0e0e0",p:{xs:2,md:3}},children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",maxWidth:1200,mx:"auto"},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2},children:[w&&e.jsx(H,{onClick:()=>p(!0),sx:{color:"#2950DA"},children:e.jsx(U,{})}),e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(d,{sx:{color:"#2950DA",fontSize:28}}),e.jsx(a,{variant:"h4",sx:{fontWeight:700,color:"#222"},children:"Notifications"}),c>0&&e.jsx(C,{label:c,size:"small",sx:{bgcolor:"#2950DA",color:"#fff",fontWeight:700,ml:1}})]})]}),c>0&&e.jsx(k,{variant:"outlined",onClick:W,sx:{color:"#2950DA",borderColor:"#2950DA",fontWeight:600,textTransform:"none","&:hover":{borderColor:"#2950DA",bgcolor:"rgba(41, 80, 218, 0.04)"}},children:"Mark All as Read"})]})}),e.jsxs(r,{sx:{flex:1,px:{xs:2,md:4},py:{xs:2,md:3},maxWidth:1200,mx:"auto",width:"100%"},children:[h&&e.jsx(J,{severity:"error",sx:{mb:3},children:h}),n.length===0?e.jsxs(I,{elevation:0,sx:{borderRadius:3,p:{xs:4,md:8},textAlign:"center",bgcolor:"#fff"},children:[e.jsx(d,{sx:{fontSize:64,color:"#ccc",mb:2}}),e.jsx(a,{variant:"h5",sx:{color:"#666",mb:1},children:"No notifications yet"}),e.jsx(a,{sx:{color:"#999",fontSize:16},children:"You're all caught up! We'll notify you when there's something new."})]}):e.jsx(I,{elevation:0,sx:{borderRadius:3,overflow:"hidden"},children:e.jsx(Q,{sx:{p:0},children:n.map((s,o)=>e.jsxs(T.Fragment,{children:[e.jsxs(V,{sx:{p:{xs:2,md:3},bgcolor:s.unread?"rgba(41, 80, 218, 0.02)":"#fff","&:hover":{bgcolor:s.unread?"rgba(41, 80, 218, 0.04)":"#f8f9fa"},transition:"background-color 0.2s ease"},children:[e.jsx(Y,{sx:{minWidth:48},children:e.jsx(r,{sx:{bgcolor:s.unread?"#E8ECF2":"#f5f5f5",borderRadius:2,p:1,display:"flex",alignItems:"center",justifyContent:"center",width:40,height:40},children:e.jsx(d,{sx:{color:s.unread?"#2950DA":"#999",fontSize:20}})})}),e.jsx(q,{primary:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(a,{sx:{fontWeight:s.unread?700:600,fontSize:16,color:"#222"},children:s.title}),s.unread&&e.jsx(r,{sx:{width:8,height:8,borderRadius:"50%",bgcolor:"#2950DA"}})]}),secondary:e.jsxs(r,{sx:{mt:1},children:[e.jsx(a,{sx:{color:"#444",fontSize:14,lineHeight:1.4,mb:1},children:s.content}),e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(a,{sx:{color:"#999",fontSize:12,fontWeight:500},children:s.time}),s.type&&e.jsx(C,{label:s.type,size:"small",variant:"outlined",sx:{fontSize:11,height:20,borderColor:"#ddd",color:"#666"}})]})]})}),s.unread&&e.jsx(k,{size:"small",onClick:()=>E(s.id),disabled:g===s.id,sx:{color:"#2950DA",textTransform:"none",fontWeight:600,fontSize:12,minWidth:0,px:1,"&:hover":{bgcolor:"rgba(41, 80, 218, 0.04)"}},children:g===s.id?e.jsx(A,{size:16}):"Mark as read"})]}),o<n.length-1&&e.jsx(O,{sx:{mx:2}})]},s.id))})})]})]})]})};export{me as default};
