import{v as ue,w as De,r as l,x as We,y as He,j as n,b as k,g as Z,a as ee,u as te,_ as D,s as W,c as ce,e as ne,z as qe,m as Ue,d as A,A as Ve,f as L,h as O,i as w,B as S,T as R,C as Y,R as Ne}from"./index-TH8YGKRz.js";import{C as Fe}from"./Close-PlGpALEU.js";import{S as Ge}from"./AdminSidebar-Bc6icHTo.js";import{P as Xe}from"./Person-BCqWaaBP.js";import{r as P}from"./createSvgIcon-B0Pm_6cI.js";import{u as Ke,h as Je}from"./personaService-jUulqpt0.js";import{u as le,a as Ye,b as Qe,B as X}from"./Button-CJZqiG46.js";import{T as pe}from"./Tooltip-CHKfBYiS.js";import{e as he}from"./resolveComponentProps-CAz9EWAT.js";import{G as Ze,u as et}from"./Menu-CzX3FVwN.js";import{o as oe}from"./useControlled-BLQOo7Av.js";import{P as tt}from"./Paper-Mdtt8qvf.js";import{A as K}from"./Alert-DkG2QiTi.js";import{D as Se,a as Te,b as $e,c as ze}from"./DialogTitle-CKHsR478.js";import{I as nt}from"./IconButton-BAp8iDOQ.js";import{C as se}from"./Chip-DQa8OeN4.js";import{D as ve}from"./Divider-7QTrz6EV.js";function rt(e,t=0,o=1){return De(e,t,o)}function ot(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let o=e.match(t);return o&&o[0].length===1&&(o=o.map(r=>r+r)),o?`rgb${o.length===4?"a":""}(${o.map((r,s)=>s<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function Me(e){if(e.type)return e;if(e.charAt(0)==="#")return Me(ot(e));const t=e.indexOf("("),o=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(o)===-1)throw new Error(ue(9,e));let r=e.substring(t+1,e.length-1),s;if(o==="color"){if(r=r.split(" "),s=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(s)===-1)throw new Error(ue(10,s))}else r=r.split(",");return r=r.map(a=>parseFloat(a)),{type:o,values:r,colorSpace:s}}function st(e){const{type:t,colorSpace:o}=e;let{values:r}=e;return t.indexOf("rgb")!==-1?r=r.map((s,a)=>a<3?parseInt(s,10):s):t.indexOf("hsl")!==-1&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),t.indexOf("color")!==-1?r=`${o} ${r.join(" ")}`:r=`${r.join(", ")}`,`${t}(${r})`}function J(e,t){return e=Me(e),t=rt(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,st(e)}function it(e){return l.Children.toArray(e).filter(t=>l.isValidElement(t))}function fe(e){return e.substring(2).toLowerCase()}function at(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}function lt(e){const{children:t,disableReactTree:o=!1,mouseEvent:r="onClick",onClickAway:s,touchEvent:a="onTouchEnd"}=e,b=l.useRef(!1),d=l.useRef(null),x=l.useRef(!1),m=l.useRef(!1);l.useEffect(()=>(setTimeout(()=>{x.current=!0},0),()=>{x.current=!1}),[]);const f=We(He(t),d),p=le(i=>{const v=m.current;m.current=!1;const y=oe(d.current);if(!x.current||!d.current||"clientX"in i&&at(i,y))return;if(b.current){b.current=!1;return}let c;i.composedPath?c=i.composedPath().indexOf(d.current)>-1:c=!y.documentElement.contains(i.target)||d.current.contains(i.target),!c&&(o||!v)&&s(i)}),g=i=>v=>{m.current=!0;const y=t.props[i];y&&y(v)},u={ref:f};return a!==!1&&(u[a]=g(a)),l.useEffect(()=>{if(a!==!1){const i=fe(a),v=oe(d.current),y=()=>{b.current=!0};return v.addEventListener(i,p),v.addEventListener("touchmove",y),()=>{v.removeEventListener(i,p),v.removeEventListener("touchmove",y)}}},[p,a]),r!==!1&&(u[r]=g(r)),l.useEffect(()=>{if(r!==!1){const i=fe(r),v=oe(d.current);return v.addEventListener(i,p),()=>{v.removeEventListener(i,p)}}},[p,r]),n.jsx(l.Fragment,{children:l.cloneElement(t,u)})}function ct(e={}){const{autoHideDuration:t=null,disableWindowBlurListener:o=!1,onClose:r,open:s,resumeHideDuration:a}=e,b=Ye();l.useEffect(()=>{if(!s)return;function c(h){h.defaultPrevented||(h.key==="Escape"||h.key==="Esc")&&(r==null||r(h,"escapeKeyDown"))}return document.addEventListener("keydown",c),()=>{document.removeEventListener("keydown",c)}},[s,r]);const d=le((c,h)=>{r==null||r(c,h)}),x=le(c=>{!r||c==null||b.start(c,()=>{d(null,"timeout")})});l.useEffect(()=>(s&&x(t),b.clear),[s,t,x,b]);const m=c=>{r==null||r(c,"clickaway")},f=b.clear,p=l.useCallback(()=>{t!=null&&x(a??t*.5)},[t,a,x]),g=c=>h=>{const j=c.onBlur;j==null||j(h),p()},u=c=>h=>{const j=c.onFocus;j==null||j(h),f()},i=c=>h=>{const j=c.onMouseEnter;j==null||j(h),f()},v=c=>h=>{const j=c.onMouseLeave;j==null||j(h),p()};return l.useEffect(()=>{if(!o&&s)return window.addEventListener("focus",p),window.addEventListener("blur",f),()=>{window.removeEventListener("focus",p),window.removeEventListener("blur",f)}},[o,s,p,f]),{getRootProps:(c={})=>{const h=k({},he(e),he(c));return k({role:"presentation"},c,h,{onBlur:g(h),onFocus:u(h),onMouseEnter:i(h),onMouseLeave:v(h)})},onClickAway:m}}function dt(e){return Z("MuiSnackbarContent",e)}ee("MuiSnackbarContent",["root","message","action"]);const ut=["action","className","message","role"],pt=e=>{const{classes:t}=e;return ne({root:["root"],action:["action"],message:["message"]},dt,t)},ht=W(tt,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>{const t=e.palette.mode==="light"?.8:.98,o=qe.emphasize(e.palette.background.default,t);return k({},e.typography.body2,{color:e.vars?e.vars.palette.SnackbarContent.color:e.palette.getContrastText(o),backgroundColor:e.vars?e.vars.palette.SnackbarContent.bg:o,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,flexGrow:1,[e.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}})}),vt=W("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0"}),ft=W("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),gt=l.forwardRef(function(t,o){const r=te({props:t,name:"MuiSnackbarContent"}),{action:s,className:a,message:b,role:d="alert"}=r,x=D(r,ut),m=r,f=pt(m);return n.jsxs(ht,k({role:d,square:!0,elevation:6,className:ce(f.root,a),ownerState:m,ref:o},x,{children:[n.jsx(vt,{className:f.message,ownerState:m,children:b}),s?n.jsx(ft,{className:f.action,ownerState:m,children:s}):null]}))});function xt(e){return Z("MuiSnackbar",e)}ee("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const mt=["onEnter","onExited"],bt=["action","anchorOrigin","autoHideDuration","children","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onBlur","onClose","onFocus","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"],yt=e=>{const{classes:t,anchorOrigin:o}=e,r={root:["root",`anchorOrigin${A(o.vertical)}${A(o.horizontal)}`]};return ne(r,xt,t)},ge=W("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[`anchorOrigin${A(o.anchorOrigin.vertical)}${A(o.anchorOrigin.horizontal)}`]]}})(({theme:e,ownerState:t})=>{const o={left:"50%",right:"auto",transform:"translateX(-50%)"};return k({zIndex:(e.vars||e).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},t.anchorOrigin.vertical==="top"?{top:8}:{bottom:8},t.anchorOrigin.horizontal==="left"&&{justifyContent:"flex-start"},t.anchorOrigin.horizontal==="right"&&{justifyContent:"flex-end"},{[e.breakpoints.up("sm")]:k({},t.anchorOrigin.vertical==="top"?{top:24}:{bottom:24},t.anchorOrigin.horizontal==="center"&&o,t.anchorOrigin.horizontal==="left"&&{left:24,right:"auto"},t.anchorOrigin.horizontal==="right"&&{right:24,left:"auto"})})}),Q=l.forwardRef(function(t,o){const r=te({props:t,name:"MuiSnackbar"}),s=Ue(),a={enter:s.transitions.duration.enteringScreen,exit:s.transitions.duration.leavingScreen},{action:b,anchorOrigin:{vertical:d,horizontal:x}={vertical:"bottom",horizontal:"left"},autoHideDuration:m=null,children:f,className:p,ClickAwayListenerProps:g,ContentProps:u,disableWindowBlurListener:i=!1,message:v,open:y,TransitionComponent:c=Ze,transitionDuration:h=a,TransitionProps:{onEnter:j,onExited:M}={}}=r,T=D(r.TransitionProps,mt),$=D(r,bt),B=k({},r,{anchorOrigin:{vertical:d,horizontal:x},autoHideDuration:m,disableWindowBlurListener:i,TransitionComponent:c,transitionDuration:h}),E=yt(B),{getRootProps:z,onClickAway:I}=ct(k({},B)),[Oe,de]=l.useState(!0),we=et({elementType:ge,getSlotProps:z,externalForwardedProps:$,ownerState:B,additionalProps:{ref:o},className:[E.root,p]}),Pe=re=>{de(!0),M&&M(re)},Ie=(re,_e)=>{de(!1),j&&j(re,_e)};return!y&&Oe?null:n.jsx(lt,k({onClickAway:I},g,{children:n.jsx(ge,k({},we,{children:n.jsx(c,k({appear:!0,in:y,timeout:h,direction:d==="top"?"down":"up",onEnter:Ie,onExited:Pe},T,{children:f||n.jsx(gt,k({message:v,action:b},u))}))}))}))});function Ct(e){return Z("MuiToggleButton",e)}const _=ee("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge","fullWidth"]),Ae=l.createContext({}),Le=l.createContext(void 0);function jt(e,t){return t===void 0||e===void 0?!1:Array.isArray(t)?t.indexOf(e)>=0:e===t}const Rt=["value"],kt=["children","className","color","disabled","disableFocusRipple","fullWidth","onChange","onClick","selected","size","value"],Bt=e=>{const{classes:t,fullWidth:o,selected:r,disabled:s,size:a,color:b}=e,d={root:["root",r&&"selected",s&&"disabled",o&&"fullWidth",`size${A(a)}`,b]};return ne(d,Ct,t)},Et=W(Qe,{name:"MuiToggleButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[`size${A(o.size)}`]]}})(({theme:e,ownerState:t})=>{let o=t.color==="standard"?e.palette.text.primary:e.palette[t.color].main,r;return e.vars&&(o=t.color==="standard"?e.vars.palette.text.primary:e.vars.palette[t.color].main,r=t.color==="standard"?e.vars.palette.text.primaryChannel:e.vars.palette[t.color].mainChannel),k({},e.typography.button,{borderRadius:(e.vars||e).shape.borderRadius,padding:11,border:`1px solid ${(e.vars||e).palette.divider}`,color:(e.vars||e).palette.action.active},t.fullWidth&&{width:"100%"},{[`&.${_.disabled}`]:{color:(e.vars||e).palette.action.disabled,border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:J(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${_.selected}`]:{color:o,backgroundColor:e.vars?`rgba(${r} / ${e.vars.palette.action.selectedOpacity})`:J(o,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${r} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:J(o,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${r} / ${e.vars.palette.action.selectedOpacity})`:J(o,e.palette.action.selectedOpacity)}}}},t.size==="small"&&{padding:7,fontSize:e.typography.pxToRem(13)},t.size==="large"&&{padding:15,fontSize:e.typography.pxToRem(15)})}),xe=l.forwardRef(function(t,o){const r=l.useContext(Ae),{value:s}=r,a=D(r,Rt),b=l.useContext(Le),d=Ve(k({},a,{selected:jt(t.value,s)}),t),x=te({props:d,name:"MuiToggleButton"}),{children:m,className:f,color:p="standard",disabled:g=!1,disableFocusRipple:u=!1,fullWidth:i=!1,onChange:v,onClick:y,selected:c,size:h="medium",value:j}=x,M=D(x,kt),T=k({},x,{color:p,disabled:g,disableFocusRipple:u,fullWidth:i,size:h}),$=Bt(T),B=z=>{y&&(y(z,j),z.defaultPrevented)||v&&v(z,j)},E=b||"";return n.jsx(Et,k({className:ce(a.className,$.root,f,E),disabled:g,focusRipple:!u,ref:o,onClick:B,onChange:v,value:j,ownerState:T,"aria-pressed":c},M,{children:m}))});function St(e){return Z("MuiToggleButtonGroup",e)}const C=ee("MuiToggleButtonGroup",["root","selected","horizontal","vertical","disabled","grouped","groupedHorizontal","groupedVertical","fullWidth","firstButton","lastButton","middleButton"]),Tt=["children","className","color","disabled","exclusive","fullWidth","onChange","orientation","size","value"],$t=e=>{const{classes:t,orientation:o,fullWidth:r,disabled:s}=e,a={root:["root",o==="vertical"&&"vertical",r&&"fullWidth"],grouped:["grouped",`grouped${A(o)}`,s&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return ne(a,St,t)},zt=W("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:o}=e;return[{[`& .${C.grouped}`]:t.grouped},{[`& .${C.grouped}`]:t[`grouped${A(o.orientation)}`]},{[`& .${C.firstButton}`]:t.firstButton},{[`& .${C.lastButton}`]:t.lastButton},{[`& .${C.middleButton}`]:t.middleButton},t.root,o.orientation==="vertical"&&t.vertical,o.fullWidth&&t.fullWidth]}})(({ownerState:e,theme:t})=>k({display:"inline-flex",borderRadius:(t.vars||t).shape.borderRadius},e.orientation==="vertical"&&{flexDirection:"column"},e.fullWidth&&{width:"100%"},{[`& .${C.grouped}`]:k({},e.orientation==="horizontal"?{[`&.${C.selected} + .${C.grouped}.${C.selected}`]:{borderLeft:0,marginLeft:0}}:{[`&.${C.selected} + .${C.grouped}.${C.selected}`]:{borderTop:0,marginTop:0}})},e.orientation==="horizontal"?{[`& .${C.firstButton},& .${C.middleButton}`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${C.lastButton},& .${C.middleButton}`]:{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0}}:{[`& .${C.firstButton},& .${C.middleButton}`]:{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`& .${C.lastButton},& .${C.middleButton}`]:{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0}},e.orientation==="horizontal"?{[`& .${C.lastButton}.${_.disabled},& .${C.middleButton}.${_.disabled}`]:{borderLeft:"1px solid transparent"}}:{[`& .${C.lastButton}.${_.disabled},& .${C.middleButton}.${_.disabled}`]:{borderTop:"1px solid transparent"}})),Mt=l.forwardRef(function(t,o){const r=te({props:t,name:"MuiToggleButtonGroup"}),{children:s,className:a,color:b="standard",disabled:d=!1,exclusive:x=!1,fullWidth:m=!1,onChange:f,orientation:p="horizontal",size:g="medium",value:u}=r,i=D(r,Tt),v=k({},r,{disabled:d,fullWidth:m,orientation:p,size:g}),y=$t(v),c=l.useCallback((B,E)=>{if(!f)return;const z=u&&u.indexOf(E);let I;u&&z>=0?(I=u.slice(),I.splice(z,1)):I=u?u.concat(E):[E],f(B,I)},[f,u]),h=l.useCallback((B,E)=>{f&&f(B,u===E?null:E)},[f,u]),j=l.useMemo(()=>({className:y.grouped,onChange:x?h:c,value:u,size:g,fullWidth:m,color:b,disabled:d}),[y.grouped,x,h,c,u,g,m,b,d]),M=it(s),T=M.length,$=B=>{const E=B===0,z=B===T-1;return E&&z?"":E?y.firstButton:z?y.lastButton:y.middleButton};return n.jsx(zt,k({role:"group",className:ce(y.root,a),ref:o,ownerState:v},i,{children:n.jsx(Ae.Provider,{value:j,children:M.map((B,E)=>n.jsx(Le.Provider,{value:$(E),children:B},E))})}))});var H={},me;function At(){if(me)return H;me=1;var e=L();Object.defineProperty(H,"__esModule",{value:!0}),H.default=void 0;var t=e(P()),o=O();return H.default=(0,t.default)((0,o.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-2 12H6v-2h12zm0-3H6V9h12zm0-3H6V6h12z"}),"Message"),H}var Lt=At();const be=w(Lt);var q={},ye;function Ot(){if(ye)return q;ye=1;var e=L();Object.defineProperty(q,"__esModule",{value:!0}),q.default=void 0;var t=e(P()),o=O();return q.default=(0,t.default)((0,o.jsx)("path",{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 18H4V8h16z"}),"CalendarToday"),q}var wt=Ot();const Ce=w(wt);var U={},je;function Pt(){if(je)return U;je=1;var e=L();Object.defineProperty(U,"__esModule",{value:!0}),U.default=void 0;var t=e(P()),o=O();return U.default=(0,t.default)((0,o.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1z"}),"Lock"),U}var It=Pt();const _t=w(It);var V={},Re;function Dt(){if(Re)return V;Re=1;var e=L();Object.defineProperty(V,"__esModule",{value:!0}),V.default=void 0;var t=e(P()),o=O();return V.default=(0,t.default)((0,o.jsx)("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92"}),"Share"),V}var Wt=Dt();const Ht=w(Wt),qt=({conversation:e,onVisibilityChange:t,disabled:o=!1,showLabel:r=!0})=>{const[s,a]=l.useState(!1),[b,d]=l.useState(null),[x,m]=l.useState(null),f=async(u,i)=>{if(!(!i||i===e.visibility)){a(!0),d(null);try{const v=await Ke(e.id,i);t&&t(e.id,v.data.visibility),m(`Conversation visibility updated to ${i.toLowerCase()}`)}catch(v){const y=v instanceof Error?v.message:"Failed to update conversation visibility";d(y)}finally{a(!1)}}},p=()=>{d(null)},g=()=>{m(null)};return n.jsxs(S,{children:[r&&n.jsx(R,{variant:"subtitle2",sx:{mb:1,color:"text.secondary"},children:"Conversation Visibility"}),n.jsxs(Mt,{value:e.visibility,exclusive:!0,onChange:f,disabled:o||s,size:"small",sx:{"& .MuiToggleButton-root":{px:2,py:1,border:"1px solid",borderColor:"divider","&.Mui-selected":{backgroundColor:"primary.main",color:"primary.contrastText","&:hover":{backgroundColor:"primary.dark"}}}},children:[n.jsx(xe,{value:"PRIVATE",children:n.jsx(pe,{title:"Only you can see this conversation",children:n.jsxs(S,{sx:{display:"flex",alignItems:"center",gap:1},children:[n.jsx(_t,{fontSize:"small"}),n.jsx(R,{variant:"body2",children:"Private"}),s&&e.visibility==="PRIVATE"&&n.jsx(Y,{size:16})]})})}),n.jsx(xe,{value:"SHARED",children:n.jsx(pe,{title:"Anyone in your workspace can see this conversation",children:n.jsxs(S,{sx:{display:"flex",alignItems:"center",gap:1},children:[n.jsx(Ht,{fontSize:"small"}),n.jsx(R,{variant:"body2",children:"Shared"}),s&&e.visibility==="SHARED"&&n.jsx(Y,{size:16})]})})})]}),n.jsx(Q,{open:!!b,autoHideDuration:6e3,onClose:p,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:n.jsx(K,{onClose:p,severity:"error",sx:{width:"100%"},children:b})}),n.jsx(Q,{open:!!x,autoHideDuration:3e3,onClose:g,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:n.jsx(K,{onClose:g,severity:"success",sx:{width:"100%"},children:x})})]})};var N={},ke;function Ut(){if(ke)return N;ke=1;var e=L();Object.defineProperty(N,"__esModule",{value:!0}),N.default=void 0;var t=e(P()),o=O();return N.default=(0,t.default)((0,o.jsx)("path",{d:"m20.54 5.23-1.39-1.68C18.88 3.21 18.47 3 18 3H6c-.47 0-.88.21-1.16.55L3.46 5.23C3.17 5.57 3 6.02 3 6.5V19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6.5c0-.48-.17-.93-.46-1.27M12 17.5 6.5 12H10v-2h4v2h3.5zM5.12 5l.81-1h12l.94 1z"}),"Archive"),N}var Vt=Ut();const ie=w(Vt);var F={},Be;function Nt(){if(Be)return F;Be=1;var e=L();Object.defineProperty(F,"__esModule",{value:!0}),F.default=void 0;var t=e(P()),o=O();return F.default=(0,t.default)((0,o.jsx)("path",{d:"m20.55 5.22-1.39-1.68C18.88 3.21 18.47 3 18 3H6c-.47 0-.88.21-1.15.55L3.46 5.22C3.17 5.57 3 6.01 3 6.5V19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6.5c0-.49-.17-.93-.45-1.28M12 9.5l5.5 5.5H14v2h-4v-2H6.5zM5.12 5l.82-1h12l.93 1z"}),"Unarchive"),F}var Ft=Nt();const ae=w(Ft);var G={},Ee;function Gt(){if(Ee)return G;Ee=1;var e=L();Object.defineProperty(G,"__esModule",{value:!0}),G.default=void 0;var t=e(P()),o=O();return G.default=(0,t.default)((0,o.jsx)("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"}),"Warning"),G}var Xt=Gt();const Kt=w(Xt),Jt=({conversation:e,onArchiveChange:t,disabled:o=!1,variant:r="button"})=>{const[s,a]=l.useState(!1),[b,d]=l.useState(null),[x,m]=l.useState(null),[f,p]=l.useState(!1),[g,u]=l.useState(null),i=!!e.archivedAt,v=T=>{u(T),p(!0)},y=async()=>{if(!g)return;const T=g==="archive";a(!0),d(null),p(!1);try{const $=await Je(e.id,T);t&&t(e.id,$.data.archived,$.data.archivedAt),m(T?"Conversation archived successfully":"Conversation unarchived successfully")}catch($){const B=$ instanceof Error?$.message:"Failed to update conversation archive status";d(B)}finally{a(!1),u(null)}},c=()=>{p(!1),u(null)},h=()=>{d(null)},j=()=>{m(null)},M=()=>r==="icon"?n.jsx(X,{onClick:()=>v(i?"unarchive":"archive"),disabled:o||s,size:"small",startIcon:s?n.jsx(Y,{size:16}):i?n.jsx(ae,{}):n.jsx(ie,{}),sx:{minWidth:"auto",px:1},children:i?"Unarchive":"Archive"}):n.jsx(X,{onClick:()=>v(i?"unarchive":"archive"),disabled:o||s,variant:i?"outlined":"contained",color:i?"primary":"warning",startIcon:s?n.jsx(Y,{size:16}):i?n.jsx(ae,{}):n.jsx(ie,{}),sx:{mb:1},children:s?i?"Unarchiving...":"Archiving...":i?"Unarchive Conversation":"Archive Conversation"});return n.jsxs(S,{children:[M(),n.jsxs(Se,{open:f,onClose:c,maxWidth:"sm",fullWidth:!0,children:[n.jsxs(Te,{sx:{display:"flex",alignItems:"center",gap:1},children:[n.jsx(Kt,{color:"warning"}),n.jsx(R,{variant:"h6",children:g==="archive"?"Archive Conversation":"Unarchive Conversation"})]}),n.jsxs($e,{children:[n.jsx(R,{variant:"body1",sx:{mb:2},children:g==="archive"?n.jsx(n.Fragment,{children:"Are you sure you want to archive this conversation?"}):n.jsx(n.Fragment,{children:"Are you sure you want to unarchive this conversation?"})}),g==="archive"&&n.jsxs(K,{severity:"warning",sx:{mt:2},children:[n.jsx(R,{variant:"body2",children:n.jsx("strong",{children:"Archived conversations:"})}),n.jsxs("ul",{style:{margin:"8px 0",paddingLeft:"20px"},children:[n.jsx("li",{children:"Cannot receive new messages"}),n.jsx("li",{children:"Cannot be edited"}),n.jsx("li",{children:"Cannot change visibility settings"}),n.jsx("li",{children:"Will be moved to archived section"})]})]})]}),n.jsxs(ze,{sx:{px:3,pb:2},children:[n.jsx(X,{onClick:c,color:"inherit",children:"Cancel"}),n.jsx(X,{onClick:y,variant:"contained",color:g==="archive"?"warning":"primary",startIcon:g==="archive"?n.jsx(ie,{}):n.jsx(ae,{}),children:g==="archive"?"Archive":"Unarchive"})]})]}),n.jsx(Q,{open:!!b,autoHideDuration:6e3,onClose:h,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:n.jsx(K,{onClose:h,severity:"error",sx:{width:"100%"},children:b})}),n.jsx(Q,{open:!!x,autoHideDuration:3e3,onClose:j,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:n.jsx(K,{onClose:j,severity:"success",sx:{width:"100%"},children:x})})]})},fn=({open:e,onClose:t,conversation:o,onConversationUpdate:r})=>{var f;const[s,a]=l.useState(o);Ne.useEffect(()=>{a(o)},[o]);const b=(p,g)=>{if(s){const u={...s,visibility:g};a(u),r&&r(p,{visibility:g})}},d=(p,g,u)=>{if(s){const i={...s,archivedAt:u};a(i),r&&r(p,{archivedAt:u})}},x=p=>new Date(p).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});if(!s)return null;const m=!!s.archivedAt;return n.jsxs(Se,{open:e,onClose:t,"aria-labelledby":"conversation-settings-title","aria-describedby":"conversation-settings-description",maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:2}},children:[n.jsxs(Te,{id:"conversation-settings-title",sx:{display:"flex",alignItems:"center",justifyContent:"space-between",pb:1},children:[n.jsxs(S,{sx:{display:"flex",alignItems:"center",gap:1},children:[n.jsx(Ge,{color:"primary"}),n.jsx(R,{variant:"h6",children:"Conversation Settings"})]}),n.jsx(nt,{onClick:t,size:"small","aria-label":"Close settings",children:n.jsx(Fe,{})})]}),n.jsxs($e,{id:"conversation-settings-description",sx:{pt:2},children:[n.jsxs(S,{sx:{mb:3},children:[n.jsx(R,{variant:"subtitle1",sx:{mb:2,fontWeight:600},children:"Conversation Details"}),n.jsxs(S,{sx:{display:"flex",flexDirection:"column",gap:2},children:[n.jsxs(S,{sx:{display:"flex",alignItems:"center",gap:1},children:[n.jsx(be,{fontSize:"small",color:"action"}),n.jsx(R,{variant:"body2",color:"text.secondary",children:"Title:"}),n.jsx(R,{variant:"body2",sx:{fontWeight:500},children:s.title||"Untitled Conversation"})]}),n.jsxs(S,{sx:{display:"flex",alignItems:"center",gap:1},children:[n.jsx(Xe,{fontSize:"small",color:"action"}),n.jsx(R,{variant:"body2",color:"text.secondary",children:"Persona:"}),n.jsx(R,{variant:"body2",sx:{fontWeight:500},children:s.persona.name})]}),n.jsxs(S,{sx:{display:"flex",alignItems:"center",gap:1},children:[n.jsx(be,{fontSize:"small",color:"action"}),n.jsx(R,{variant:"body2",color:"text.secondary",children:"Messages:"}),n.jsx(se,{label:`${((f=s._count)==null?void 0:f.messages)??0} messages`,size:"small",variant:"outlined"})]}),n.jsxs(S,{sx:{display:"flex",alignItems:"center",gap:1},children:[n.jsx(Ce,{fontSize:"small",color:"action"}),n.jsx(R,{variant:"body2",color:"text.secondary",children:"Created:"}),n.jsx(R,{variant:"body2",sx:{fontWeight:500},children:x(s.createdAt)})]}),m&&n.jsxs(S,{sx:{display:"flex",alignItems:"center",gap:1},children:[n.jsx(Ce,{fontSize:"small",color:"action"}),n.jsx(R,{variant:"body2",color:"text.secondary",children:"Archived:"}),n.jsx(se,{label:x(s.archivedAt),size:"small",color:"warning",variant:"outlined"})]})]})]}),n.jsx(ve,{sx:{my:2}}),n.jsxs(S,{sx:{mb:2},children:[n.jsx(R,{variant:"subtitle1",sx:{mb:2,fontWeight:600},children:"Privacy Settings"}),m?n.jsxs(S,{sx:{p:2,bgcolor:"grey.100",borderRadius:1},children:[n.jsx(R,{variant:"body2",color:"text.secondary",children:"Visibility cannot be changed for archived conversations."}),n.jsxs(S,{sx:{mt:1,display:"flex",alignItems:"center",gap:1},children:[n.jsx(R,{variant:"body2",color:"text.secondary",children:"Current visibility:"}),n.jsx(se,{label:s.visibility,size:"small",variant:"outlined"})]})]}):n.jsx(qt,{conversation:s,onVisibilityChange:b,showLabel:!1}),n.jsx(R,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:s.visibility==="PRIVATE"?"Only you can see this conversation.":"Anyone in your workspace can see this conversation."})]}),n.jsx(ve,{sx:{my:2}}),n.jsxs(S,{sx:{mb:2},children:[n.jsx(R,{variant:"subtitle1",sx:{mb:2,fontWeight:600},children:"Archive Settings"}),n.jsx(Jt,{conversation:s,onArchiveChange:d,variant:"button"}),n.jsx(R,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:m?"This conversation is archived and cannot receive new messages or be edited.":"Archive this conversation to move it out of your active conversations."})]})]}),n.jsx(ze,{sx:{px:3,pb:2},children:n.jsx(X,{onClick:t,variant:"contained",color:"primary",children:"Done"})})]})};export{ie as A,fn as C,Q as S,ae as U,lt as a,Ht as b};
