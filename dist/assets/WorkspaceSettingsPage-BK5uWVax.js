import{a as Z,g as ee,r as i,u as se,_ as ae,b as D,T as t,j as e,s as W,c as te,e as re,B as o,C as H}from"./index-TH8YGKRz.js";import{A as R,D as oe,M as I}from"./AdminSidebar-Bc6icHTo.js";import{g as ne,u as ie,e as le}from"./workspaceService-BQTsMTjt.js";import{S as z}from"./Settings-BKj_EDFP.js";import{A as M}from"./Alert-DkG2QiTi.js";import{G as h}from"./Grid-M9g4rATc.js";import{P as ce}from"./Paper-Mdtt8qvf.js";import{T as N,F as E,a as L,S as U}from"./TextField-Du34Z7EL.js";import{B as k}from"./Button-CJZqiG46.js";import{c as G}from"./createSvgIcon-1GfyKPJS.js";import{C as F,a as B}from"./CardContent-CuJeD_yf.js";import{D as S}from"./Divider-7QTrz6EV.js";import{D as de,a as xe,b as me,c as he}from"./DialogTitle-CKHsR478.js";import"./useControlled-BLQOo7Av.js";import"./Menu-CzX3FVwN.js";import"./resolveComponentProps-CAz9EWAT.js";import"./createSvgIcon-B0Pm_6cI.js";import"./IconButton-BAp8iDOQ.js";import"./Avatar-BgeWc8dC.js";import"./useSlot-B20WKvL2.js";import"./getThemeProps-DA88l0eV.js";function pe(a){return ee("MuiCardHeader",a)}const _=Z("MuiCardHeader",["root","avatar","action","content","title","subheader"]),ue=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],je=a=>{const{classes:r}=a;return re({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},pe,r)},fe=W("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(a,r)=>D({[`& .${_.title}`]:r.title,[`& .${_.subheader}`]:r.subheader},r.root)})({display:"flex",alignItems:"center",padding:16}),ye=W("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(a,r)=>r.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),ge=W("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(a,r)=>r.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),be=W("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(a,r)=>r.content})({flex:"1 1 auto"}),ve=i.forwardRef(function(r,b){const j=se({props:r,name:"MuiCardHeader"}),{action:p,avatar:u,className:v,component:l="div",disableTypography:f=!1,subheader:x,subheaderTypographyProps:T,title:C,titleTypographyProps:y}=j,w=ae(j,ue),m=D({},j,{component:l,disableTypography:f}),c=je(m);let n=C;n!=null&&n.type!==t&&!f&&(n=e.jsx(t,D({variant:u?"body2":"h5",className:c.title,component:"span",display:"block"},y,{children:n})));let d=x;return d!=null&&d.type!==t&&!f&&(d=e.jsx(t,D({variant:u?"body2":"body1",className:c.subheader,color:"text.secondary",component:"span",display:"block"},T,{children:d}))),e.jsxs(fe,D({className:te(c.root,v),as:l,ref:b,ownerState:m},w,{children:[u&&e.jsx(ye,{className:c.avatar,ownerState:m,children:u}),e.jsxs(be,{className:c.content,ownerState:m,children:[n,d]}),p&&e.jsx(ge,{className:c.action,ownerState:m,children:p})]}))}),q=G(e.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete"),Ce=G(e.jsx("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"}),"Save"),ke=["UTC","America/New_York","America/Chicago","America/Denver","America/Los_Angeles","Europe/London","Europe/Paris","Europe/Berlin","Asia/Tokyo","Asia/Shanghai","Australia/Sydney"],Se=["en-US","en-GB","es-ES","fr-FR","de-DE","it-IT","pt-BR","ja-JP","zh-CN","ko-KR"],Ve=()=>{const[a,r]=i.useState(null),[b,j]=i.useState(!0),[p,u]=i.useState(!1),[v,l]=i.useState(""),[f,x]=i.useState(""),[T,C]=i.useState(!1),[y,w]=i.useState(!1),[m,c]=i.useState(""),[n,d]=i.useState({name:"",timezone:"",locale:""});i.useEffect(()=>{O()},[]);const O=async()=>{try{j(!0),l("");const s=await ne();r(s),d({name:s.name||"",timezone:s.timezone||"UTC",locale:s.locale||"en-US"})}catch(s){l(s instanceof Error?s.message:"Failed to load workspace data")}finally{j(!1)}},A=(s,g)=>{d(X=>({...X,[s]:g}))},V=async s=>{if(s.preventDefault(),!a){l("No workspace data available");return}try{u(!0),l(""),x("");const g=await ie(a.id,n);x("Workspace updated successfully!"),r(g),setTimeout(()=>x(""),3e3)}catch(g){l(g instanceof Error?g.message:"Failed to update workspace")}finally{u(!1)}},$=()=>{a&&(d({name:a.name||"",timezone:a.timezone||"UTC",locale:a.locale||"en-US"}),l(""),x(""))},J=()=>{C(!0),c("")},K=async()=>{if(a)try{w(!0),l(""),await le(a.id,m||void 0),x("Workspace deletion requested successfully. The workspace will be permanently deleted in 30 days."),C(!1),c(""),setTimeout(()=>x(""),5e3)}catch(s){l(s instanceof Error?s.message:"Failed to request workspace deletion")}finally{w(!1)}},P=()=>{C(!1),c("")},[Y,Q]=i.useState(!1);return e.jsxs(o,{sx:{display:"flex",minHeight:"100vh"},children:[e.jsx(o,{sx:{display:{xs:"none",md:"block"}},children:e.jsx(R,{})}),e.jsx(oe,{open:Y,onClose:()=>Q(!1),PaperProps:{sx:{width:240}},children:e.jsx(R,{isDrawer:!0})}),e.jsxs(o,{sx:{flex:1,display:"flex",flexDirection:"column",ml:{xs:0,md:"220px"}},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",p:2,backgroundColor:"primary.main",color:"white"},children:[e.jsx(z,{sx:{mr:2,fontSize:32}}),e.jsx(t,{variant:"h5",component:"h1",sx:{flexGrow:1},children:"Workspace Settings"})]}),e.jsx(o,{sx:{flex:1,p:{xs:2,md:3},backgroundColor:"#f5f5f5"},children:!a||b?e.jsx(o,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"60vh"},children:b?e.jsx(H,{}):e.jsx(t,{variant:"h6",color:"error",children:v||"Failed to load workspace data"})}):e.jsxs(o,{sx:{maxWidth:800,mx:"auto"},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx(z,{sx:{mr:2,fontSize:32,color:"primary.main"}}),e.jsx(t,{variant:"h4",component:"h1",children:"Workspace Settings"})]}),v&&e.jsx(M,{severity:"error",sx:{mb:2},children:v}),f&&e.jsx(M,{severity:"success",sx:{mb:2},children:f}),e.jsxs(h,{container:!0,spacing:3,children:[e.jsx(h,{item:!0,xs:12,md:8,children:e.jsxs(ce,{sx:{p:3},children:[e.jsx(t,{variant:"h6",sx:{mb:3},children:"General Settings"}),e.jsx("form",{onSubmit:V,children:e.jsxs(h,{container:!0,spacing:3,children:[e.jsx(h,{item:!0,xs:12,children:e.jsx(N,{fullWidth:!0,label:"Workspace Name",value:n.name,onChange:s=>A("name",s.target.value),required:!0,helperText:"Workspace name must be between 2 and 100 characters",error:n.name.length>0&&n.name.length<2})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsxs(E,{fullWidth:!0,children:[e.jsx(L,{children:"Timezone"}),e.jsx(U,{value:n.timezone,label:"Timezone",onChange:s=>A("timezone",s.target.value),children:ke.map(s=>e.jsx(I,{value:s,children:s},s))})]})}),e.jsx(h,{item:!0,xs:12,md:6,children:e.jsxs(E,{fullWidth:!0,children:[e.jsx(L,{children:"Locale"}),e.jsx(U,{value:n.locale,label:"Locale",onChange:s=>A("locale",s.target.value),children:Se.map(s=>e.jsx(I,{value:s,children:s},s))})]})}),e.jsx(h,{item:!0,xs:12,children:e.jsxs(o,{sx:{display:"flex",gap:2,justifyContent:"flex-end"},children:[e.jsx(k,{variant:"outlined",onClick:$,disabled:p,children:"Reset"}),e.jsx(k,{type:"submit",variant:"contained",startIcon:p?e.jsx(H,{size:20}):e.jsx(Ce,{}),disabled:p,children:p?"Saving...":"Save Changes"})]})})]})})]})}),e.jsxs(h,{item:!0,xs:12,md:4,children:[e.jsxs(F,{children:[e.jsx(ve,{title:"Workspace Info"}),e.jsxs(B,{children:[e.jsxs(o,{sx:{mb:2},children:[e.jsx(t,{variant:"body2",color:"text.secondary",children:"Workspace ID"}),e.jsx(t,{variant:"body1",sx:{fontFamily:"monospace"},children:a.id})]}),e.jsx(S,{sx:{my:2}}),e.jsxs(o,{sx:{mb:2},children:[e.jsx(t,{variant:"body2",color:"text.secondary",children:"Domain"}),e.jsx(t,{variant:"body1",children:a.domain||"Not set"})]}),e.jsx(S,{sx:{my:2}}),e.jsxs(o,{sx:{mb:2},children:[e.jsx(t,{variant:"body2",color:"text.secondary",children:"Status"}),e.jsx(t,{variant:"body1",color:a.isActive?"success.main":"error.main",children:a.isActive?"Active":"Inactive"})]}),e.jsx(S,{sx:{my:2}}),e.jsxs(o,{sx:{mb:2},children:[e.jsx(t,{variant:"body2",color:"text.secondary",children:"Max Members"}),e.jsx(t,{variant:"body1",children:a.maxMembers})]}),e.jsx(S,{sx:{my:2}}),e.jsxs(o,{sx:{mb:2},children:[e.jsx(t,{variant:"body2",color:"text.secondary",children:"Created"}),e.jsx(t,{variant:"body1",children:new Date(a.createdAt).toLocaleDateString()})]}),e.jsx(S,{sx:{my:2}}),e.jsxs(o,{children:[e.jsx(t,{variant:"body2",color:"text.secondary",children:"Last Updated"}),e.jsx(t,{variant:"body1",children:new Date(a.updatedAt).toLocaleDateString()})]})]})]}),e.jsx(F,{sx:{mt:3,border:"2px solid #ff4444"},children:e.jsxs(B,{children:[e.jsx(t,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Once you delete a workspace, there is no going back. Please be certain."}),e.jsx(k,{variant:"outlined",color:"error",startIcon:e.jsx(q,{}),onClick:J,fullWidth:!0,children:"Delete Workspace"})]})})]})]})]})})]}),e.jsxs(de,{open:T,onClose:P,maxWidth:"sm",fullWidth:!0,children:[e.jsx(xe,{sx:{color:"error.main"},children:"Delete Workspace"}),e.jsxs(me,{children:[e.jsxs(t,{sx:{mb:2},children:["Are you sure you want to delete the workspace"," ",e.jsxs("strong",{children:['"',a==null?void 0:a.name,'"']}),"?"]}),e.jsx(t,{sx:{mb:2,color:"text.secondary"},children:"This action will:"}),e.jsxs(o,{component:"ul",sx:{pl:2,mb:2},children:[e.jsx(t,{component:"li",sx:{mb:1},children:"Request workspace deletion (scheduled for 30 days from now)"}),e.jsx(t,{component:"li",sx:{mb:1},children:'Set workspace status to "Pending Deletion"'}),e.jsx(t,{component:"li",sx:{mb:1},children:"Permanently delete all workspace data after 30 days"}),e.jsx(t,{component:"li",sx:{mb:1},children:"Remove all members from the workspace"})]}),e.jsx(t,{sx:{mb:2,color:"error.main",fontWeight:"bold"},children:"This action cannot be undone!"}),e.jsx(N,{fullWidth:!0,label:"Reason for deletion (optional)",value:m,onChange:s=>c(s.target.value),placeholder:"e.g., No longer needed, migrating to another platform",multiline:!0,rows:3,helperText:"Maximum 500 characters",inputProps:{maxLength:500}})]}),e.jsxs(he,{children:[e.jsx(k,{onClick:P,disabled:y,children:"Cancel"}),e.jsx(k,{onClick:K,color:"error",variant:"contained",disabled:y,startIcon:y?e.jsx(H,{size:20}):e.jsx(q,{}),children:y?"Deleting...":"Delete Workspace"})]})]})]})};export{Ve as default};
