import{j as e,B as o,T as m,f as D,h as I,i as k,r as l,k as L}from"./index-TH8YGKRz.js";import{H as u}from"./Header-DEoxuOro.js";import{S as q}from"./SearchBar-BX2JT_VK.js";import{r as E}from"./createSvgIcon-B0Pm_6cI.js";import{G as v}from"./Grid-M9g4rATc.js";import{I as W}from"./IconButton-BAp8iDOQ.js";import{A as z}from"./Avatar-BgeWc8dC.js";import{C as H}from"./ChatInputBar-ToCd21nW.js";import{g as R}from"./personaService-jUulqpt0.js";import"./index-DVvKU7GF.js";import"./Paper-Mdtt8qvf.js";import"./SettingsPage-BRJXZXmu.js";import"./AdminSidebar-Bc6icHTo.js";import"./useControlled-BLQOo7Av.js";import"./Menu-CzX3FVwN.js";import"./resolveComponentProps-CAz9EWAT.js";import"./Button-CJZqiG46.js";import"./Divider-7QTrz6EV.js";import"./getThemeProps-DA88l0eV.js";import"./tokens-DkKdY8jA.js";import"./workspaceService-BQTsMTjt.js";import"./SwitchBase-GCTxqK2a.js";import"./TextField-Du34Z7EL.js";import"./createSvgIcon-1GfyKPJS.js";import"./DialogTitle-CKHsR478.js";import"./Alert-DkG2QiTi.js";import"./useSlot-B20WKvL2.js";import"./avatarService-BCG4JWCu.js";import"./Stack-DgAhbvWb.js";import"./useThemeProps-vG6R4auE.js";import"./InputAdornment-Cgg0GFqY.js";import"./ListItemText-DxyF1s_P.js";import"./Chip-DQa8OeN4.js";const f=()=>e.jsx(o,{sx:{mt:6,mb:4,textAlign:"center",px:{xs:2,sm:0}},children:e.jsx(m,{variant:"h4",sx:{fontWeight:800,color:"#222",fontSize:{xs:28,sm:36},mb:1},children:"Choose a persona to chat"})});var c={},w;function M(){if(w)return c;w=1;var s=D();Object.defineProperty(c,"__esModule",{value:!0}),c.default=void 0;var n=s(E()),a=I();return c.default=(0,n.default)((0,a.jsx)("path",{d:"M6 6v2h8.59L5 17.59 6.41 19 16 9.41V18h2V6z"}),"ArrowOutward"),c}var B=M();const _=k(B),G=({personas:s,onSelect:n,onViewPersona:a})=>e.jsx(o,{sx:{width:"100%",maxWidth:1e3,mx:"auto",mt:-2},children:e.jsx(v,{container:!0,columnSpacing:2,rowSpacing:6,justifyContent:"center",children:s.map(r=>e.jsxs(v,{item:!0,xs:12,sm:4,md:4,lg:4,xl:4,sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(W,{onClick:()=>n(r),sx:{p:0,mb:1.5,"&:hover":{background:"transparent"}},children:e.jsx(z,{src:r.avatarUrl||r.avatar||"",sx:{width:104,height:104,mb:0}})}),e.jsx(m,{onClick:()=>n(r),sx:{fontWeight:700,fontSize:20,color:"#222",textAlign:"center",mb:.5,cursor:"pointer","&:hover":{textDecoration:"underline"}},children:r.personalName||r.name}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:.5,justifyContent:"center"},children:[e.jsx(m,{onClick:()=>a(r),sx:{color:"#2950DA",fontWeight:500,fontSize:16,textAlign:"center",textTransform:"capitalize",cursor:"pointer","&:hover":{textDecoration:"underline"}},children:r.name}),e.jsx(_,{sx:{color:"#2950DA",fontSize:18,mb:"-2px",cursor:"pointer"},onClick:()=>a(r)})]})]},r.id))})}),we=()=>{const[s,n]=l.useState(""),[a,r]=l.useState(""),[S,h]=l.useState([]),[y,p]=l.useState(!0),[g,j]=l.useState(""),x=L();l.useEffect(()=>{async function t(){try{p(!0),j("");const i=await R();h(i.data||[])}catch(i){console.error("Error fetching personas from backend:",i),j(i instanceof Error?i.message:"Failed to load personas"),h([])}finally{p(!1)}}t()},[]);const d=S.filter(t=>t.name.toLowerCase().includes(s.toLowerCase())||(t.personalName||"").toLowerCase().includes(s.toLowerCase())||(t.description||"").toLowerCase().includes(s.toLowerCase())).slice(0,6),C=t=>{x(`/chat/${t.id}`)},A=t=>{x(`/view-persona/${t.id}`)},b=t=>{if(console.log("Message to send:",t.message),t.fileUrl&&console.log("File attached:",t.fileUrl,t.fileType),d.length>0){const i=d[0];i&&x(`/chat/${i.id}`,{state:{initialMessage:t.message}})}},P=["Help me with marketing strategy","Analyze sales performance","Review technical architecture","Get business insights","Plan product roadmap"];return y?e.jsxs(o,{sx:{minHeight:"100vh",bgcolor:"#fff",display:"flex",flexDirection:"column",position:"relative"},children:[e.jsx(u,{}),e.jsx(f,{}),e.jsx(o,{sx:{flex:1,display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(m,{children:"Loading personas..."})})]}):g?e.jsxs(o,{sx:{minHeight:"100vh",bgcolor:"#fff",display:"flex",flexDirection:"column",position:"relative"},children:[e.jsx(u,{}),e.jsx(f,{}),e.jsx(o,{sx:{flex:1,display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(m,{color:"error",children:g})})]}):e.jsxs(o,{sx:{minHeight:"100vh",bgcolor:"#fff",display:"flex",flexDirection:"column",position:"relative"},children:[e.jsx(u,{}),e.jsx(f,{}),e.jsxs(o,{sx:{flex:1,pb:20},children:[e.jsx(o,{sx:{width:"100%",maxWidth:1300,mx:"auto",mb:3},children:e.jsx(q,{value:s,onChange:n,placeholder:"Search",maxWidth:840,fullWidth:!0})}),e.jsx(G,{personas:d,onSelect:C,onViewPersona:A})]}),e.jsx(H,{value:a,onChange:r,onSend:b,placeholder:"Ask any question or describe what you need help with...",showSuggestions:!0,suggestions:P,maxWidth:1200})]})};export{we as default};
