import{a as ke,g as Oe,r as c,u as De,_ as Ee,b as y,c as G,j as e,s as ne,d as lt,e as Le,D as Ct,E as at,m as It,B as i,T as v,F as Rt,f as de,h as ue,i as fe,o as Wt,k as Et,C as Ke}from"./index-TH8YGKRz.js";import{H as zt}from"./Header-DEoxuOro.js";import{i as At,g as Tt,e as Bt}from"./personaService-jUulqpt0.js";import{A as ct}from"./Avatar-BgeWc8dC.js";import{b as dt,u as Be,B as Me}from"./Button-CJZqiG46.js";import{d as ut,a as ft,o as Pt}from"./useControlled-BLQOo7Av.js";import{c as pt}from"./createSvgIcon-1GfyKPJS.js";import{u as We,L as Mt}from"./Menu-CzX3FVwN.js";import{C as kt}from"./Chip-DQa8OeN4.js";import{L as Ot,b as Dt}from"./ListItemText-DxyF1s_P.js";import{L as Lt,u as Ft}from"./useAuth-FXh2IcXF.js";import{r as pe}from"./createSvgIcon-B0Pm_6cI.js";import{C as Nt}from"./CheckCircle-D5ylFM8e.js";import{T as Ye}from"./Tooltip-CHKfBYiS.js";import"./index-DVvKU7GF.js";import"./Paper-Mdtt8qvf.js";import"./SettingsPage-BRJXZXmu.js";import"./AdminSidebar-Bc6icHTo.js";import"./Divider-7QTrz6EV.js";import"./getThemeProps-DA88l0eV.js";import"./IconButton-BAp8iDOQ.js";import"./tokens-DkKdY8jA.js";import"./workspaceService-BQTsMTjt.js";import"./SwitchBase-GCTxqK2a.js";import"./TextField-Du34Z7EL.js";import"./resolveComponentProps-CAz9EWAT.js";import"./DialogTitle-CKHsR478.js";import"./Alert-DkG2QiTi.js";import"./useSlot-B20WKvL2.js";import"./Grid-M9g4rATc.js";import"./avatarService-BCG4JWCu.js";import"./Stack-DgAhbvWb.js";import"./useThemeProps-vG6R4auE.js";import"./InputAdornment-Cgg0GFqY.js";let ce;function ht(){if(ce)return ce;const t=document.createElement("div"),o=document.createElement("div");return o.style.width="10px",o.style.height="1px",t.appendChild(o),t.dir="rtl",t.style.fontSize="14px",t.style.width="4px",t.style.height="1px",t.style.position="absolute",t.style.top="-1000px",t.style.overflow="scroll",document.body.appendChild(t),ce="reverse",t.scrollLeft>0?ce="default":(t.scrollLeft=1,t.scrollLeft===0&&(ce="negative")),document.body.removeChild(t),ce}function _t(t,o){const n=t.scrollLeft;if(o!=="rtl")return n;switch(ht()){case"negative":return t.scrollWidth-t.clientWidth+n;case"reverse":return t.scrollWidth-t.clientWidth-n;default:return n}}function Ht(t){return Oe("MuiTab",t)}const Q=ke("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper"]),$t=["className","disabled","disableFocusRipple","fullWidth","icon","iconPosition","indicator","label","onChange","onClick","onFocus","selected","selectionFollowsFocus","textColor","value","wrapped"],Ut=t=>{const{classes:o,textColor:n,fullWidth:a,wrapped:d,icon:u,label:m,selected:S,disabled:h}=t,w={root:["root",u&&m&&"labelIcon",`textColor${lt(n)}`,a&&"fullWidth",d&&"wrapped",S&&"selected",h&&"disabled"],iconWrapper:["iconWrapper"]};return Le(w,Ht,o)},qt=ne(dt,{name:"MuiTab",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:n}=t;return[o.root,n.label&&n.icon&&o.labelIcon,o[`textColor${lt(n.textColor)}`],n.fullWidth&&o.fullWidth,n.wrapped&&o.wrapped,{[`& .${Q.iconWrapper}`]:o.iconWrapper}]}})(({theme:t,ownerState:o})=>y({},t.typography.button,{maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center"},o.label&&{flexDirection:o.iconPosition==="top"||o.iconPosition==="bottom"?"column":"row"},{lineHeight:1.25},o.icon&&o.label&&{minHeight:72,paddingTop:9,paddingBottom:9,[`& > .${Q.iconWrapper}`]:y({},o.iconPosition==="top"&&{marginBottom:6},o.iconPosition==="bottom"&&{marginTop:6},o.iconPosition==="start"&&{marginRight:t.spacing(1)},o.iconPosition==="end"&&{marginLeft:t.spacing(1)})},o.textColor==="inherit"&&{color:"inherit",opacity:.6,[`&.${Q.selected}`]:{opacity:1},[`&.${Q.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},o.textColor==="primary"&&{color:(t.vars||t).palette.text.secondary,[`&.${Q.selected}`]:{color:(t.vars||t).palette.primary.main},[`&.${Q.disabled}`]:{color:(t.vars||t).palette.text.disabled}},o.textColor==="secondary"&&{color:(t.vars||t).palette.text.secondary,[`&.${Q.selected}`]:{color:(t.vars||t).palette.secondary.main},[`&.${Q.disabled}`]:{color:(t.vars||t).palette.text.disabled}},o.fullWidth&&{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"},o.wrapped&&{fontSize:t.typography.pxToRem(12)})),Vt=c.forwardRef(function(o,n){const a=De({props:o,name:"MuiTab"}),{className:d,disabled:u=!1,disableFocusRipple:m=!1,fullWidth:S,icon:h,iconPosition:w="top",indicator:C,label:E,onChange:I,onClick:k,onFocus:L,selected:B,selectionFollowsFocus:R,textColor:F="inherit",value:O,wrapped:se=!1}=a,D=Ee(a,$t),Z=y({},a,{disabled:u,disableFocusRipple:m,selected:B,icon:!!h,iconPosition:w,label:!!E,fullWidth:S,textColor:F,wrapped:se}),H=Ut(Z),z=h&&E&&c.isValidElement(h)?c.cloneElement(h,{className:G(H.iconWrapper,h.props.className)}):h,ee=A=>{!B&&I&&I(A,O),k&&k(A)},$=A=>{R&&!B&&I&&I(A,O),L&&L(A)};return e.jsxs(qt,y({focusRipple:!m,className:G(H.root,d),ref:n,role:"tab","aria-selected":B,disabled:u,onClick:ee,onFocus:$,ownerState:Z,tabIndex:B?0:-1},D,{children:[w==="top"||w==="start"?e.jsxs(c.Fragment,{children:[z,E]}):e.jsxs(c.Fragment,{children:[E,z]}),C]}))}),Xt=pt(e.jsx("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),Kt=pt(e.jsx("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight");function Yt(t){return(1+Math.sin(Math.PI*t-Math.PI/2))/2}function Jt(t,o,n,a={},d=()=>{}){const{ease:u=Yt,duration:m=300}=a;let S=null;const h=o[t];let w=!1;const C=()=>{w=!0},E=I=>{if(w){d(new Error("Animation cancelled"));return}S===null&&(S=I);const k=Math.min(1,(I-S)/m);if(o[t]=u(k)*(n-h)+h,k>=1){requestAnimationFrame(()=>{d(null)});return}requestAnimationFrame(E)};return h===n?(d(new Error("Element already at target position")),C):(requestAnimationFrame(E),C)}const Qt=["onChange"],Gt={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function Zt(t){const{onChange:o}=t,n=Ee(t,Qt),a=c.useRef(),d=c.useRef(null),u=()=>{a.current=d.current.offsetHeight-d.current.clientHeight};return Ct(()=>{const m=ut(()=>{const h=a.current;u(),h!==a.current&&o(a.current)}),S=ft(d.current);return S.addEventListener("resize",m),()=>{m.clear(),S.removeEventListener("resize",m)}},[o]),c.useEffect(()=>{u(),o(a.current)},[o]),e.jsx("div",y({style:Gt},n,{ref:d}))}function eo(t){return Oe("MuiTabScrollButton",t)}const to=ke("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),oo=["className","slots","slotProps","direction","orientation","disabled"],ro=t=>{const{classes:o,orientation:n,disabled:a}=t;return Le({root:["root",n,a&&"disabled"]},eo,o)},no=ne(dt,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:n}=t;return[o.root,n.orientation&&o[n.orientation]]}})(({ownerState:t})=>y({width:40,flexShrink:0,opacity:.8,[`&.${to.disabled}`]:{opacity:0}},t.orientation==="vertical"&&{width:"100%",height:40,"& svg":{transform:`rotate(${t.isRtl?-90:90}deg)`}})),so=c.forwardRef(function(o,n){var a,d;const u=De({props:o,name:"MuiTabScrollButton"}),{className:m,slots:S={},slotProps:h={},direction:w}=u,C=Ee(u,oo),E=at(),I=y({isRtl:E},u),k=ro(I),L=(a=S.StartScrollButtonIcon)!=null?a:Xt,B=(d=S.EndScrollButtonIcon)!=null?d:Kt,R=We({elementType:L,externalSlotProps:h.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:I}),F=We({elementType:B,externalSlotProps:h.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:I});return e.jsx(no,y({component:"div",className:G(k.root,m),ref:n,role:null,ownerState:I,tabIndex:null},C,{children:w==="left"?e.jsx(L,y({},R)):e.jsx(B,y({},F))}))});function io(t){return Oe("MuiTabs",t)}const Pe=ke("MuiTabs",["root","vertical","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),lo=["aria-label","aria-labelledby","action","centered","children","className","component","allowScrollButtonsMobile","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","slots","slotProps","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant","visibleScrollbar"],Je=(t,o)=>t===o?t.firstChild:o&&o.nextElementSibling?o.nextElementSibling:t.firstChild,Qe=(t,o)=>t===o?t.lastChild:o&&o.previousElementSibling?o.previousElementSibling:t.lastChild,Re=(t,o,n)=>{let a=!1,d=n(t,o);for(;d;){if(d===t.firstChild){if(a)return;a=!0}const u=d.disabled||d.getAttribute("aria-disabled")==="true";if(!d.hasAttribute("tabindex")||u)d=n(t,d);else{d.focus();return}}},ao=t=>{const{vertical:o,fixed:n,hideScrollbar:a,scrollableX:d,scrollableY:u,centered:m,scrollButtonsHideMobile:S,classes:h}=t;return Le({root:["root",o&&"vertical"],scroller:["scroller",n&&"fixed",a&&"hideScrollbar",d&&"scrollableX",u&&"scrollableY"],flexContainer:["flexContainer",o&&"flexContainerVertical",m&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",S&&"scrollButtonsHideMobile"],scrollableX:[d&&"scrollableX"],hideScrollbar:[a&&"hideScrollbar"]},io,h)},co=ne("div",{name:"MuiTabs",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:n}=t;return[{[`& .${Pe.scrollButtons}`]:o.scrollButtons},{[`& .${Pe.scrollButtons}`]:n.scrollButtonsHideMobile&&o.scrollButtonsHideMobile},o.root,n.vertical&&o.vertical]}})(({ownerState:t,theme:o})=>y({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},t.vertical&&{flexDirection:"column"},t.scrollButtonsHideMobile&&{[`& .${Pe.scrollButtons}`]:{[o.breakpoints.down("sm")]:{display:"none"}}})),uo=ne("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(t,o)=>{const{ownerState:n}=t;return[o.scroller,n.fixed&&o.fixed,n.hideScrollbar&&o.hideScrollbar,n.scrollableX&&o.scrollableX,n.scrollableY&&o.scrollableY]}})(({ownerState:t})=>y({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},t.fixed&&{overflowX:"hidden",width:"100%"},t.hideScrollbar&&{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},t.scrollableX&&{overflowX:"auto",overflowY:"hidden"},t.scrollableY&&{overflowY:"auto",overflowX:"hidden"})),fo=ne("div",{name:"MuiTabs",slot:"FlexContainer",overridesResolver:(t,o)=>{const{ownerState:n}=t;return[o.flexContainer,n.vertical&&o.flexContainerVertical,n.centered&&o.centered]}})(({ownerState:t})=>y({display:"flex"},t.vertical&&{flexDirection:"column"},t.centered&&{justifyContent:"center"})),po=ne("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(t,o)=>o.indicator})(({ownerState:t,theme:o})=>y({position:"absolute",height:2,bottom:0,width:"100%",transition:o.transitions.create()},t.indicatorColor==="primary"&&{backgroundColor:(o.vars||o).palette.primary.main},t.indicatorColor==="secondary"&&{backgroundColor:(o.vars||o).palette.secondary.main},t.vertical&&{height:"100%",width:2,right:0})),ho=ne(Zt)({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),Ge={},xo=c.forwardRef(function(o,n){const a=De({props:o,name:"MuiTabs"}),d=It(),u=at(),{"aria-label":m,"aria-labelledby":S,action:h,centered:w=!1,children:C,className:E,component:I="div",allowScrollButtonsMobile:k=!1,indicatorColor:L="primary",onChange:B,orientation:R="horizontal",ScrollButtonComponent:F=so,scrollButtons:O="auto",selectionFollowsFocus:se,slots:D={},slotProps:Z={},TabIndicatorProps:H={},TabScrollButtonProps:z={},textColor:ee="primary",value:$,variant:A="standard",visibleScrollbar:ie=!1}=a,le=Ee(a,lo),P=A==="scrollable",T=R==="vertical",Y=T?"scrollTop":"scrollLeft",te=T?"top":"left",ae=T?"bottom":"right",he=T?"clientHeight":"clientWidth",oe=T?"height":"width",U=y({},a,{component:I,allowScrollButtonsMobile:k,indicatorColor:L,orientation:R,vertical:T,scrollButtons:O,textColor:ee,variant:A,visibleScrollbar:ie,fixed:!P,hideScrollbar:P&&!ie,scrollableX:P&&!T,scrollableY:P&&T,centered:w&&!P,scrollButtonsHideMobile:!k}),N=ao(U),f=We({elementType:D.StartScrollButtonIcon,externalSlotProps:Z.startScrollButtonIcon,ownerState:U}),r=We({elementType:D.EndScrollButtonIcon,externalSlotProps:Z.endScrollButtonIcon,ownerState:U}),[g,M]=c.useState(!1),[b,q]=c.useState(Ge),[V,xe]=c.useState(!1),[Fe,xt]=c.useState(!1),[Ne,mt]=c.useState(!1),[_e,bt]=c.useState({overflow:"hidden",scrollbarWidth:0}),He=new Map,X=c.useRef(null),re=c.useRef(null),$e=()=>{const s=X.current;let l;if(s){const p=s.getBoundingClientRect();l={clientWidth:s.clientWidth,scrollLeft:s.scrollLeft,scrollTop:s.scrollTop,scrollLeftNormalized:_t(s,u?"rtl":"ltr"),scrollWidth:s.scrollWidth,top:p.top,bottom:p.bottom,left:p.left,right:p.right}}let x;if(s&&$!==!1){const p=re.current.children;if(p.length>0){const j=p[He.get($)];x=j?j.getBoundingClientRect():null}}return{tabsMeta:l,tabMeta:x}},me=Be(()=>{const{tabsMeta:s,tabMeta:l}=$e();let x=0,p;if(T)p="top",l&&s&&(x=l.top-s.top+s.scrollTop);else if(p=u?"right":"left",l&&s){const W=u?s.scrollLeftNormalized+s.clientWidth-s.scrollWidth:s.scrollLeft;x=(u?-1:1)*(l[p]-s[p]+W)}const j={[p]:x,[oe]:l?l[oe]:0};if(isNaN(b[p])||isNaN(b[oe]))q(j);else{const W=Math.abs(b[p]-j[p]),_=Math.abs(b[oe]-j[oe]);(W>=1||_>=1)&&q(j)}}),ze=(s,{animation:l=!0}={})=>{l?Jt(Y,X.current,s,{duration:d.transitions.duration.standard}):X.current[Y]=s},Ue=s=>{let l=X.current[Y];T?l+=s:(l+=s*(u?-1:1),l*=u&&ht()==="reverse"?-1:1),ze(l)},qe=()=>{const s=X.current[he];let l=0;const x=Array.from(re.current.children);for(let p=0;p<x.length;p+=1){const j=x[p];if(l+j[he]>s){p===0&&(l=s);break}l+=j[he]}return l},gt=()=>{Ue(-1*qe())},vt=()=>{Ue(qe())},St=c.useCallback(s=>{bt({overflow:null,scrollbarWidth:s})},[]),yt=()=>{const s={};s.scrollbarSizeListener=P?e.jsx(ho,{onChange:St,className:G(N.scrollableX,N.hideScrollbar)}):null;const x=P&&(O==="auto"&&(V||Fe)||O===!0);return s.scrollButtonStart=x?e.jsx(F,y({slots:{StartScrollButtonIcon:D.StartScrollButtonIcon},slotProps:{startScrollButtonIcon:f},orientation:R,direction:u?"right":"left",onClick:gt,disabled:!V},z,{className:G(N.scrollButtons,z.className)})):null,s.scrollButtonEnd=x?e.jsx(F,y({slots:{EndScrollButtonIcon:D.EndScrollButtonIcon},slotProps:{endScrollButtonIcon:r},orientation:R,direction:u?"left":"right",onClick:vt,disabled:!Fe},z,{className:G(N.scrollButtons,z.className)})):null,s},Ve=Be(s=>{const{tabsMeta:l,tabMeta:x}=$e();if(!(!x||!l)){if(x[te]<l[te]){const p=l[Y]+(x[te]-l[te]);ze(p,{animation:s})}else if(x[ae]>l[ae]){const p=l[Y]+(x[ae]-l[ae]);ze(p,{animation:s})}}}),Ce=Be(()=>{P&&O!==!1&&mt(!Ne)});c.useEffect(()=>{const s=ut(()=>{X.current&&me()});let l;const x=W=>{W.forEach(_=>{_.removedNodes.forEach(be=>{var J;(J=l)==null||J.unobserve(be)}),_.addedNodes.forEach(be=>{var J;(J=l)==null||J.observe(be)})}),s(),Ce()},p=ft(X.current);p.addEventListener("resize",s);let j;return typeof ResizeObserver<"u"&&(l=new ResizeObserver(s),Array.from(re.current.children).forEach(W=>{l.observe(W)})),typeof MutationObserver<"u"&&(j=new MutationObserver(x),j.observe(re.current,{childList:!0})),()=>{var W,_;s.clear(),p.removeEventListener("resize",s),(W=j)==null||W.disconnect(),(_=l)==null||_.disconnect()}},[me,Ce]),c.useEffect(()=>{const s=Array.from(re.current.children),l=s.length;if(typeof IntersectionObserver<"u"&&l>0&&P&&O!==!1){const x=s[0],p=s[l-1],j={root:X.current,threshold:.99},W=Te=>{xe(!Te[0].isIntersecting)},_=new IntersectionObserver(W,j);_.observe(x);const be=Te=>{xt(!Te[0].isIntersecting)},J=new IntersectionObserver(be,j);return J.observe(p),()=>{_.disconnect(),J.disconnect()}}},[P,O,Ne,C==null?void 0:C.length]),c.useEffect(()=>{M(!0)},[]),c.useEffect(()=>{me()}),c.useEffect(()=>{Ve(Ge!==b)},[Ve,b]),c.useImperativeHandle(h,()=>({updateIndicator:me,updateScrollButtons:Ce}),[me,Ce]);const Xe=e.jsx(po,y({},H,{className:G(N.indicator,H.className),ownerState:U,style:y({},b,H.style)}));let Ie=0;const jt=c.Children.map(C,s=>{if(!c.isValidElement(s))return null;const l=s.props.value===void 0?Ie:s.props.value;He.set(l,Ie);const x=l===$;return Ie+=1,c.cloneElement(s,y({fullWidth:A==="fullWidth",indicator:x&&!g&&Xe,selected:x,selectionFollowsFocus:se,onChange:B,textColor:ee,value:l},Ie===1&&$===!1&&!s.props.tabIndex?{tabIndex:0}:{}))}),wt=s=>{const l=re.current,x=Pt(l).activeElement;if(x.getAttribute("role")!=="tab")return;let j=R==="horizontal"?"ArrowLeft":"ArrowUp",W=R==="horizontal"?"ArrowRight":"ArrowDown";switch(R==="horizontal"&&u&&(j="ArrowRight",W="ArrowLeft"),s.key){case j:s.preventDefault(),Re(l,x,Qe);break;case W:s.preventDefault(),Re(l,x,Je);break;case"Home":s.preventDefault(),Re(l,null,Je);break;case"End":s.preventDefault(),Re(l,null,Qe);break}},Ae=yt();return e.jsxs(co,y({className:G(N.root,E),ownerState:U,ref:n,as:I},le,{children:[Ae.scrollButtonStart,Ae.scrollbarSizeListener,e.jsxs(uo,{className:N.scroller,ownerState:U,style:{overflow:_e.overflow,[T?`margin${u?"Left":"Right"}`:"marginBottom"]:ie?void 0:-_e.scrollbarWidth},ref:X,children:[e.jsx(fo,{"aria-label":m,"aria-labelledby":S,"aria-orientation":R==="vertical"?"vertical":null,className:N.flexContainer,ownerState:U,onKeyDown:wt,ref:re,role:"tablist",children:jt}),g&&Xe]}),Ae.scrollButtonEnd]}))}),mo=({avatar:t,name:o,role:n,onStartChat:a})=>{const[d,u]=c.useState(!1),[m,S]=c.useState(!1),h=window.location.pathname.split("/").pop();c.useEffect(()=>{(async()=>{if(h)try{u(!1)}catch{u(!1)}})()},[h]);const w=async()=>{if(h){S(!0);try{const C=await At(h);u(C.isFavourited)}catch(C){console.error("Error toggling favorite:",C)}S(!1)}};return e.jsxs(i,{sx:{display:"flex",alignItems:{xs:"flex-start",sm:"center"},gap:4,mb:1,mt:-1.5,flexWrap:{xs:"wrap",sm:"nowrap"}},children:[e.jsx(ct,{src:t,sx:{width:100,height:100,mt:1.5}}),e.jsxs(i,{sx:{minWidth:0},children:[e.jsx(v,{sx:{fontWeight:800,fontSize:28,color:"#222",mb:.5},children:o}),e.jsx(v,{sx:{color:"#2950DA",fontWeight:500,fontSize:18,mb:1},children:n})]}),e.jsx(i,{sx:{flex:1}}),e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1,mt:{xs:2,sm:0}},children:[e.jsx(Me,{variant:"contained",sx:{bgcolor:"#2950DA",color:"#fff",fontWeight:700,fontSize:15,borderRadius:2,px:3,py:.7,minHeight:36,boxShadow:"none",textTransform:"none","&:hover":{bgcolor:"#526794"}},onClick:a,children:"Start Chat"}),e.jsx(Me,{variant:d?"outlined":"text",onClick:w,disabled:m,sx:{ml:1,fontWeight:700,fontSize:15,textTransform:"none",color:d?"#e53935":"#222",borderColor:d?"#e53935":"rgba(0,0,0,0.12)"},children:d?"Remove Favorite":"Mark as favorite"})]})]})},bo=["About","Personality traits","Use Cases","Latest Updates"],go=({value:t,onChange:o})=>e.jsx(i,{sx:{borderBottom:1,borderColor:"#e0e0e0",mb:2},children:e.jsx(xo,{value:t,onChange:(n,a)=>o(a),textColor:"inherit",TabIndicatorProps:{style:{backgroundColor:"#2950DA",height:3,borderRadius:2}},sx:{"& .MuiTabs-indicator":{backgroundColor:"#2950DA",height:3,borderRadius:2},"& .MuiTab-root":{fontWeight:700,fontSize:16,color:"#888",textTransform:"none",minWidth:120},"& .Mui-selected":{color:"#2950DA"}},children:bo.map((n,a)=>e.jsx(Vt,{label:n},n))})}),K=({title:t,children:o,sx:n})=>e.jsxs(i,{sx:{mb:3,overflowX:"hidden",wordBreak:"break-word",...n},children:[e.jsx(v,{sx:{fontWeight:800,fontSize:20,color:"#222",mb:1},children:t}),e.jsx(i,{sx:{maxWidth:"100%",overflowWrap:"break-word"},children:o})]}),Ze=({chips:t})=>e.jsx(i,{sx:{display:"flex",flexWrap:"wrap",gap:1.5,mb:1,maxWidth:"100%"},children:t.map(o=>e.jsx(kt,{label:o,sx:{bgcolor:"#E8ECF2",color:"#2950DA",fontWeight:600,fontSize:15,borderRadius:2,px:1.5,height:34,maxWidth:"100%","& .MuiChip-label":{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}},o))}),vo=({personas:t,onSelect:o,currentPersonaId:n})=>e.jsxs(i,{sx:{width:220,pt:0,pr:0},children:[e.jsx(v,{sx:{fontWeight:800,fontSize:18,mb:0,color:"#222"},children:"Similar Personas"}),e.jsx(Mt,{children:t.map(a=>e.jsxs(Ot,{button:!0,onClick:()=>o(a.id),sx:{borderRadius:2,mb:.5,"&:hover":{background:"#f5f5f7"},px:1,background:a.id===n?"#f0f0f2":"transparent"},children:[e.jsx(Lt,{children:e.jsx(ct,{src:a.avatar,sx:{width:44,height:44,mr:1}})}),e.jsx(Dt,{primary:e.jsx(v,{sx:{fontWeight:700,fontSize:16,color:"#222"},children:a.personalName||"Unknown Name"}),secondary:e.jsx(v,{sx:{color:"#2950DA",fontWeight:500,fontSize:14},children:a.name||"Unknown Role"})})]},a.id))})]}),So=async(t,o)=>{const a=await Rt("http://localhost:3000/api/webhooks/traits/forward",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t)});if(!a.ok){const d=await a.text();throw new Error(`Forward failed: ${a.status} - ${d}`)}return a.json()};var ge={},et;function yo(){if(et)return ge;et=1;var t=de();Object.defineProperty(ge,"__esModule",{value:!0}),ge.default=void 0;var o=t(pe()),n=ue();return ge.default=(0,o.default)((0,n.jsx)("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zM6 20V4h7v5h5v11z"}),"InsertDriveFileOutlined"),ge}var jo=yo();const wo=fe(jo);var ve={},tt;function Co(){if(tt)return ve;tt=1;var t=de();Object.defineProperty(ve,"__esModule",{value:!0}),ve.default=void 0;var o=t(pe()),n=ue();return ve.default=(0,o.default)((0,n.jsx)("path",{d:"M20 18c1.1 0 1.99-.9 1.99-2L22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2H0v2h24v-2zM4 6h16v10H4z"}),"ComputerOutlined"),ve}var Io=Co();const Ro=fe(Io);var Se={},ot;function Wo(){if(ot)return Se;ot=1;var t=de();Object.defineProperty(Se,"__esModule",{value:!0}),Se.default=void 0;var o=t(pe()),n=ue();return Se.default=(0,o.default)((0,n.jsx)("path",{d:"M2 20h20v-4H2zm2-3h2v2H4zM2 4v4h20V4zm4 3H4V5h2zm-4 7h20v-4H2zm2-3h2v2H4z"}),"StorageOutlined"),Se}var Eo=Wo();const zo=fe(Eo);var ye={},rt;function Ao(){if(rt)return ye;rt=1;var t=de();Object.defineProperty(ye,"__esModule",{value:!0}),ye.default=void 0;var o=t(pe()),n=ue();return ye.default=(0,o.default)((0,n.jsx)("path",{d:"m14.06 9.02.92.92L5.92 19H5v-.92zM17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29m-3.6 3.19L3 17.25V21h3.75L17.81 9.94z"}),"EditOutlined"),ye}var To=Ao();const Bo=fe(To);var je={},nt;function Po(){if(nt)return je;nt=1;var t=de();Object.defineProperty(je,"__esModule",{value:!0}),je.default=void 0;var o=t(pe()),n=ue();return je.default=(0,o.default)((0,n.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2M4 12c0-.61.08-1.21.21-1.78L8.99 15v1c0 1.1.9 2 2 2v1.93C7.06 19.43 4 16.07 4 12m13.89 5.4c-.26-.81-1-1.4-1.9-1.4h-1v-3c0-.55-.45-1-1-1h-6v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41C17.92 5.77 20 8.65 20 12c0 2.08-.81 3.98-2.11 5.4"}),"PublicOutlined"),je}var Mo=Po();const ko=fe(Mo);var we={},st;function Oo(){if(st)return we;st=1;var t=de();Object.defineProperty(we,"__esModule",{value:!0}),we.default=void 0;var o=t(pe()),n=ue();return we.default=(0,o.default)([(0,n.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),(0,n.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime"),we}var Do=Oo();const it=fe(Do),gr=({persona:t})=>{const{id:o}=Wt(),[n,a]=c.useState(0),[d,u]=c.useState(!0),[m,S]=c.useState(null),[h,w]=c.useState(null),[C,E]=c.useState([]),I=Et(),{getAuthToken:k}=Ft(),[L,B]=c.useState(!1),[R,F]=c.useState(""),[O,se]=c.useState(""),[D,Z]=c.useState(null),H=async()=>{try{if(u(!0),w(null),!o){w("No persona ID provided");return}const r=await Bt(o);S({id:r.id,name:r.name,personalName:r.personalName||"",role:r.personaRole||"",avatar:r.avatarUrl||"",traits:[{title:"About",description:r.about||r.description||""},{title:"Core Expertise",description:r.coreExpertise||""},{title:"Communication Style",description:r.communicationStyle||""},{title:"Traits",description:r.traits||""},{title:"Pain Points",description:r.painPoints||""},{title:"Key Responsibilities",description:r.keyResponsibility||""}],updatedAt:r.updatedAt,createdAt:r.createdAt}),Z(new Date)}catch(r){console.error("Error fetching persona data:",r),w(r instanceof Error?r.message:"Failed to load persona data")}finally{u(!1)}};c.useEffect(()=>{async function r(){try{const M=((await Tt()).data||[]).map(b=>({id:b.id,name:b.name,personalName:b.personalName,role:b.name||"Unknown",avatar:b.avatarUrl||"",personaRole:b.personaRole,avatarUrl:b.avatarUrl}));E(M)}catch(g){console.error("Error fetching personas from backend:",g),E([])}}r()},[]),c.useEffect(()=>{o&&H()},[o]);const z=r=>m!=null&&m.traits?m.traits.find(g=>g.title&&g.title.toLowerCase()===r.toLowerCase()):null,ee=()=>{const r=z("About");return(r==null?void 0:r.description)||"No about information available."},$=()=>{const r=z("Communication Style");return(r==null?void 0:r.description)||"No communication style information available."},A=r=>{const g=new Date(r),b=new Date().getTime()-g.getTime(),q=Math.floor(b/(1e3*60)),V=Math.floor(b/(1e3*60*60)),xe=Math.floor(b/(1e3*60*60*24));return q<1?"Just now":q<60?`${q} minute${q===1?"":"s"} ago`:V<24?`${V} hour${V===1?"":"s"} ago`:xe<7?`${xe} day${xe===1?"":"s"} ago`:g.toLocaleDateString()+" "+g.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},ie=r=>{const g=new Date(r),b=Math.floor((new Date().getTime()-g.getTime())/(1e3*60*60*24));return b<7?{status:"recent",color:"#2950DA",text:"Recently updated"}:b<30?{status:"moderate",color:"#ff9800",text:"Updated recently"}:{status:"old",color:"#f44336",text:"Needs update"}};function le(r){if(Array.isArray(r))return r;if(r&&typeof r=="object"){const g=r;for(const M in g){const b=g[M];if(Array.isArray(b))return b;break}}if(typeof r=="string"){const g=r.trim();try{const M=JSON.parse(g);if(Array.isArray(M))return M;if(M&&typeof M=="object"){const b=M;for(const q in b){const V=b[q];if(Array.isArray(V))return V;break}}}catch{}return[r]}return[String(r??"")]}const P=()=>{const r=z("Core Expertise");return r!=null&&r.description?le(r.description):["No core expertise information available."]},T=()=>{const r=z("Traits");return r!=null&&r.description?le(r.description):["No traits information available."]},Y=()=>{const r=z("Pain Points");return r!=null&&r.description?le(r.description):["No pain points information available."]},te=()=>{const r=z("Key Responsibilities");return r!=null&&r.description?le(r.description):["No key responsibilities information available."]},ae=()=>C.length?C.filter(r=>r.id!==o).map(r=>({id:r.id,name:r.name,personalName:r.personalName,role:r.name||r.personaRole||"",avatar:r.avatarUrl||r.avatar||""})):[],he=r=>{I(`/view-persona/${r}`)},oe=[{img:"https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=400&q=80",text:"How should I explain our fallback transaction mechanism in pitches?"},{img:"https://images.unsplash.com/photo-1519125323398-675f0ddb6308?auto=format&fit=crop&w=400&q=80",text:"What's the best way to position our QR settlement timelines?"},{img:"https://images.unsplash.com/photo-1518770660439-4636190af475?auto=format&fit=crop&w=400&q=80",text:"Can you help validate how we compare to Razorpay on uptime and disputes?"},{img:"",text:"How do I counter merchant objections about T+1 settlements?"}],U=[{name:"Sarah Chen",avatar:"https://randomuser.me/api/portraits/women/47.jpg",text:"A client asked if we offer instant settlement. How flexible are we on that?"},{name:"Sarah Chen",avatar:"https://randomuser.me/api/portraits/women/47.jpg",text:"What's our standard SLA for resolving failed transactions during peak hours?"}],N=[{icon:e.jsx(wo,{sx:{fontSize:28,color:"#222"}}),title:"Integrated April 2025 Meta Ads update",date:"April 20, 2025"},{icon:e.jsx(Ro,{sx:{fontSize:28,color:"#222"}}),title:"Completed training on new product features",date:"April 15, 2025"},{icon:e.jsx(zo,{sx:{fontSize:28,color:"#222"}}),title:"Updated knowledge base with Q1 2025 data",date:"April 10, 2025"},{icon:e.jsx(Bo,{sx:{fontSize:28,color:"#222"}}),title:"Refreshed persona's tone and style guidelines",date:"April 5, 2025"},{icon:e.jsx(ko,{sx:{fontSize:28,color:"#222"}}),title:"Added support for new languages",date:"March 28, 2025"}];if(d)return e.jsx(i,{sx:{minHeight:"100vh",bgcolor:"#fff",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(Ke,{})});if(h)return e.jsx(i,{sx:{minHeight:"100vh",bgcolor:"#fff",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(v,{color:"error",children:h})});if(!(m!=null&&m.traits)||m.traits.length===0)return e.jsx(i,{sx:{minHeight:"100vh",bgcolor:"#fff",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx(v,{children:"No traits found for this persona."})});const f=t||m;return e.jsxs(i,{sx:{minHeight:"100vh",bgcolor:"#fff"},children:[e.jsx(zt,{}),e.jsxs(i,{sx:{display:"flex",pt:4,pb:6,pr:8,maxWidth:1350,margin:"0 auto",flexDirection:{xs:"column",md:"row"}},children:[e.jsx(i,{sx:{display:{xs:"none",md:"block"},pl:3},children:e.jsx(vo,{personas:ae(),onSelect:he,currentPersonaId:o})}),e.jsxs(i,{sx:{flex:1,pl:{xs:2,md:2},maxWidth:{xs:"100%",md:"calc(100% - 240px)"},overflowX:"hidden"},children:[e.jsx(mo,{avatar:(f==null?void 0:f.avatar)||"",name:(f==null?void 0:f.personalName)||(f==null?void 0:f.name)||"",role:(f==null?void 0:f.name)||"",onStartChat:()=>I(`/chat/${f==null?void 0:f.id}`)}),e.jsx(i,{sx:{display:"flex",alignItems:"center",gap:2,mb:3},children:e.jsxs(i,{sx:{display:"flex",flexDirection:"column"},children:[e.jsx(Me,{variant:"contained",onClick:async()=>{try{B(!0),se(""),F("Triggering traits update...");const r=await k();await So({personaName:(f==null?void 0:f.name)||"",metadata:{about:(ee()||"About not available").trim(),coreExpertise:P(),communicationStyle:($()||"Not specified").trim(),traits:T(),painPoints:Y(),keyResponsibilities:te()}},r),F("Traits update triggered successfully!"),o&&H()}catch(r){se((r==null?void 0:r.message)||"Failed to update traits"),F("")}finally{B(!1)}},disabled:L,sx:{background:"linear-gradient(90deg, #2950DA 0%, #1E88E5 100%)",textTransform:"none",fontWeight:600},children:L?e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Ke,{size:16,sx:{color:"white"}}),"Updating..."]}):"Update persona traits"}),f!=null&&f.updatedAt?e.jsx(Ye,{title:new Date(f.updatedAt).toLocaleString(),children:e.jsxs(i,{children:[e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:.5,mt:1},children:[e.jsx(it,{sx:{fontSize:14,color:"#666"}}),e.jsxs(v,{sx:{color:"#666",fontSize:12,fontStyle:"italic"},children:["Last updated: ",A(f.updatedAt)]}),(()=>{const r=ie(f.updatedAt);return e.jsx(i,{sx:{width:8,height:8,borderRadius:"50%",bgcolor:r.color,ml:1},title:r.text})})()]}),(()=>{const r=ie(f.updatedAt);return e.jsx(v,{sx:{color:r.color,fontSize:11,mt:.5,fontWeight:500},children:r.text})})(),D&&e.jsxs(v,{sx:{color:"#999",fontSize:10,mt:.5,fontStyle:"italic"},children:["Data refreshed:"," ",A(D.toISOString())]})]})}):e.jsx(Ye,{title:`Created on ${f!=null&&f.createdAt?new Date(f.createdAt).toLocaleString():"unknown date"}`,children:e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:.5,mt:1},children:[e.jsx(it,{sx:{fontSize:14,color:"#f44336"}}),e.jsxs(v,{sx:{color:"#f44336",fontSize:12,fontStyle:"italic"},children:["Created:"," ",f!=null&&f.createdAt?A(f.createdAt):"Unknown"]}),D&&e.jsxs(v,{sx:{color:"#999",fontSize:10,mt:.5,fontStyle:"italic"},children:["Data refreshed:"," ",A(D.toISOString())]})]})}),R&&e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:.5,mt:1},children:[e.jsx(Nt,{sx:{fontSize:14,color:"#2950DA"}}),e.jsx(v,{sx:{color:"#2950DA",fontSize:12,fontWeight:500},children:R})]}),O&&e.jsx(v,{sx:{color:"#c62828",fontSize:12,mt:1},children:O})]})}),e.jsx(go,{value:n,onChange:a}),n===0&&e.jsxs(e.Fragment,{children:[e.jsxs(i,{sx:{display:"flex",gap:2,mb:4,flexWrap:"wrap"},children:[e.jsxs(i,{sx:{border:"1.5px solid #e0e0e0",borderRadius:2,p:3,minWidth:200,flex:"1 1 200px",bgcolor:"#fff"},children:[e.jsx(v,{sx:{color:"#666",fontSize:14,fontWeight:500,mb:1},children:"Avg. User Rating"}),e.jsx(v,{sx:{fontSize:24,fontWeight:700,color:"#222"},children:"4.8/5"})]}),e.jsxs(i,{sx:{border:"1.5px solid #e0e0e0",borderRadius:2,p:3,minWidth:200,flex:"1 1 200px",bgcolor:"#fff"},children:[e.jsx(v,{sx:{color:"#666",fontSize:14,fontWeight:500,mb:1},children:"Total Conversations"}),e.jsx(v,{sx:{fontSize:24,fontWeight:700,color:"#222"},children:"23.4K"})]}),e.jsxs(i,{sx:{border:"1.5px solid #e0e0e0",borderRadius:2,p:3,minWidth:200,flex:"1 1 200px",bgcolor:"#fff"},children:[e.jsx(v,{sx:{color:"#666",fontSize:14,fontWeight:500,mb:1},children:"Success Rate"}),e.jsx(v,{sx:{fontSize:24,fontWeight:700,color:"#222"},children:"92%"})]})]}),e.jsx(K,{title:"About",children:ee().split(`
`).map((r,g)=>e.jsx(i,{sx:{mb:1,overflowWrap:"break-word",textAlign:"justify"},children:e.jsx("span",{children:r})},g))}),e.jsx(K,{title:"Core Expertise",children:e.jsx(Ze,{chips:P()})}),e.jsx(K,{title:"Communication Style",children:e.jsx(i,{sx:{overflowWrap:"break-word",textAlign:"justify"},children:e.jsx("span",{children:$()})})})]}),n===1&&e.jsxs(e.Fragment,{children:[e.jsx(K,{title:"Traits",children:e.jsx(Ze,{chips:T()})}),e.jsx(K,{title:"Pain Points",children:e.jsx(i,{sx:{display:"flex",flexWrap:"wrap",gap:2},children:Y().map(r=>e.jsx(i,{sx:{border:"1.5px solid #e0e0e0",borderRadius:2,p:2.2,minWidth:250,maxWidth:280,fontWeight:500,fontSize:16,color:"#222",bgcolor:"#fff",flex:"1 1 260px",overflowWrap:"break-word"},children:r},r))})}),e.jsx(K,{title:"Key Responsibilities",children:e.jsx(i,{sx:{display:"flex",flexWrap:"wrap",gap:2},children:te().map(r=>e.jsx(i,{sx:{border:"1.5px solid #e0e0e0",borderRadius:2,p:2.2,minWidth:250,maxWidth:280,fontWeight:500,fontSize:16,color:"#222",bgcolor:"#fff",flex:"1 1 260px",overflowWrap:"break-word"},children:r},r))})})]}),n===2&&e.jsxs(e.Fragment,{children:[e.jsx(K,{title:"Sample Questions",sx:{mb:4},children:e.jsx(i,{sx:{display:"flex",flexDirection:"row",gap:4,overflowX:"auto",justifyContent:"flex-start",pb:1},children:oe.map((r,g)=>e.jsxs(i,{sx:{display:"flex",flexDirection:"column",alignItems:"center",bgcolor:"#fff",borderRadius:3,p:0,minWidth:200,maxWidth:200,width:150,boxShadow:"0 1px 4px rgba(44,62,80,0.04)"},children:[e.jsx(i,{sx:{width:200,height:200,bgcolor:r.img?"transparent":"#E8ECF2",display:"flex",alignItems:"center",justifyContent:"center",mt:2,mb:2,overflow:"hidden"},children:r.img?e.jsx(i,{component:"img",src:r.img,alt:"question",sx:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsx(i,{sx:{width:40,height:40,borderRadius:2,bgcolor:"#E8ECF2"}})}),e.jsx(v,{sx:{fontSize:14,color:"#111",fontWeight:500,textAlign:"center",px:1,pb:2},children:r.text})]},g))})}),e.jsx(K,{title:"Example Interactions",children:e.jsx(i,{sx:{display:"flex",flexDirection:"column",gap:3},children:U.map((r,g)=>e.jsxs(i,{sx:{display:"flex",alignItems:"flex-start",gap:2},children:[e.jsx(i,{component:"img",src:r.avatar,alt:r.name,sx:{width:44,height:44,borderRadius:"50%",objectFit:"cover",mt:.5}}),e.jsxs(i,{sx:{flex:1},children:[e.jsx(v,{sx:{fontWeight:600,fontSize:15,color:"#2950DA",mb:.5},children:r.name}),e.jsx(i,{sx:{bgcolor:"#E8ECF2",borderRadius:2,px:2,py:1,display:"inline-block",fontSize:16,color:"#222",fontWeight:500},children:r.text})]})]},g))})})]}),n===3&&e.jsx(K,{title:"Latest Updates",children:e.jsx(i,{sx:{display:"flex",flexDirection:"column",gap:3},children:N.map((r,g)=>e.jsxs(i,{sx:{display:"flex",alignItems:"center",gap:2,bgcolor:"#f8fafb",borderRadius:2,p:2,boxShadow:"0 1px 4px rgba(44,62,80,0.04)"},children:[e.jsx(i,{children:r.icon}),e.jsxs(i,{sx:{flex:1},children:[e.jsx(i,{sx:{fontWeight:600,fontSize:16,color:"#222"},children:r.title}),e.jsx(i,{sx:{fontSize:14,color:"#888",mt:.5},children:r.date})]})]},g))})})]})]})]})};export{gr as default};
