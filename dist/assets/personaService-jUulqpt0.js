import{F as r}from"./index-TH8YGKRz.js";const t="http://localhost:3000",d=async e=>{const a=await r(`${t}/api/personas`);if(!a.ok){const s=await a.json();throw new Error(s.message||"Failed to fetch personas")}return await a.json()},p=async e=>{const o=await r(`${t}/api/personas/${e}`);if(!o.ok){const s=await o.json();throw new Error(s.message||"Failed to fetch persona")}return(await o.json()).data},h=async e=>{const o=await r(`${t}/api/personas/${e}/favourite`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!o.ok){const s=await o.json();throw new Error(s.message||"Failed to toggle favourite")}return(await o.json()).data},y=async(e,o,a,s)=>{const n={message:o};a&&(n.conversationId=a),s&&(n.fileId=s);const i=await r(`${t}/api/personas/${e}/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!i.ok){const c=await i.json();throw new Error(c.message||"Failed to send message")}return await i.json()},f=async e=>{const a=await r(`${t}/api/conversations${e?"?archived=true":""}`);if(!a.ok){const s=await a.json();throw new Error(s.message||"Failed to fetch conversations")}return await a.json()},u=async e=>{const o=await r(`${t}/api/conversations/${e}`);if(!o.ok){const a=await o.json();throw new Error(a.message||"Failed to fetch conversation")}return await o.json()},j=async(e,o)=>{const a=await r(`${t}/api/conversations/${e}/visibility`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({visibility:o})});if(!a.ok){const s=await a.json();throw new Error(s.message||"Failed to update conversation visibility")}return await a.json()},m=async(e,o)=>{try{console.log("=== FRONTEND: Archive toggle start ==="),console.log("Input:",{conversationId:e,archived:o});const a=`${t}/api/conversations/${e}/archive`,s=JSON.stringify({archived:o});console.log("Making request to:",a),console.log("Request body:",s);const n=await r(a,{method:"PATCH",headers:{"Content-Type":"application/json"},body:s});if(console.log("Response status:",n.status),console.log("Response ok:",n.ok),!n.ok){const c=await n.text();console.error("Response error text:",c);let l;try{l=JSON.parse(c)}catch{l={message:c}}throw console.error("Archive toggle failed:",l),new Error(l.message||l.error||"Failed to update conversation archive status")}const i=await n.json();return console.log("Archive toggle response:",i),console.log("=== FRONTEND: Archive toggle success ==="),i}catch(a){throw console.error("=== FRONTEND: Archive toggle error ==="),console.error("Error:",a instanceof Error?a.message:String(a)),a}},v=async(e,o)=>{const a=await r(`${t}/api/messages/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:o})});if(!a.ok){const s=await a.json();throw new Error(s.message||"Failed to edit message")}return await a.json()},$=async(e,o)=>{const a=await r(`${t}/api/conversations/${e}/files`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!a.ok){const s=await a.json();throw new Error(s.message||"Failed to request file upload URL")}return await a.json()},T=async(e,o)=>{const a=await r(`${t}/api/messages/${e}/reactions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:o})});if(!a.ok){const s=await a.json();throw new Error(s.message||"Failed to toggle message reaction")}return await a.json()},E=async e=>{const o=await fetch(`${t}/p/${e}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!o.ok){const a=await o.json();throw new Error(a.message||"Failed to get shared conversation")}return await o.json()},k=async(e,o)=>{const a={},s=await r(`${t}/api/conversations/${e}/share`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!s.ok){const n=await s.json();throw new Error(n.message||"Failed to create shareable link")}return await s.json()},F=async()=>{const e=await r(`${t}/api/chat-sessions`);if(!e.ok){const a=await e.json();throw new Error(a.message||"Failed to fetch chat sessions")}return(await e.json()).data};export{F as a,f as b,k as c,u as d,p as e,v as f,d as g,m as h,h as i,E as j,$ as r,y as s,T as t,j as u};
