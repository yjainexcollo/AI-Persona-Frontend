import{j as e,_ as J,s as z,b as g,z as q,a as X,g as K,r as c,u as Q,c as Y,e as Z,T as m,f as W,h as _,i as F,R as ee,B as l,C as re,F as H}from"./index-TH8YGKRz.js";import{P as oe}from"./PhotoCamera-BvYurExR.js";import{r as U}from"./createSvgIcon-B0Pm_6cI.js";import{S as te}from"./Search-DrB_le8H.js";import{g as se}from"./avatarService-BCG4JWCu.js";import{A as T}from"./Avatar-BgeWc8dC.js";import{c as le}from"./createSvgIcon-1GfyKPJS.js";import{b as ae,B}from"./Button-CJZqiG46.js";import{u as ne}from"./Menu-CzX3FVwN.js";import{T as C}from"./TextField-Du34Z7EL.js";import{I as ie}from"./InputAdornment-Cgg0GFqY.js";import{P as N}from"./Paper-Mdtt8qvf.js";import"./useControlled-BLQOo7Av.js";import"./useSlot-B20WKvL2.js";import"./resolveComponentProps-CAz9EWAT.js";const ce=le(e.jsx("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz"),de=["slots","slotProps"],ue=z(ae,{name:"MuiBreadcrumbCollapsed"})(({theme:r})=>g({display:"flex",marginLeft:`calc(${r.spacing(1)} * 0.5)`,marginRight:`calc(${r.spacing(1)} * 0.5)`},r.palette.mode==="light"?{backgroundColor:r.palette.grey[100],color:r.palette.grey[700]}:{backgroundColor:r.palette.grey[700],color:r.palette.grey[100]},{borderRadius:2,"&:hover, &:focus":g({},r.palette.mode==="light"?{backgroundColor:r.palette.grey[200]}:{backgroundColor:r.palette.grey[600]}),"&:active":g({boxShadow:r.shadows[0]},r.palette.mode==="light"?{backgroundColor:q.emphasize(r.palette.grey[200],.12)}:{backgroundColor:q.emphasize(r.palette.grey[600],.12)})})),pe=z(ce)({width:24,height:16});function fe(r){const{slots:o={},slotProps:s={}}=r,p=J(r,de),a=r;return e.jsx("li",{children:e.jsx(ue,g({focusRipple:!0},p,{ownerState:a,children:e.jsx(pe,g({as:o.CollapsedIcon,ownerState:a},s.collapsedIcon))}))})}function xe(r){return K("MuiBreadcrumbs",r)}const he=X("MuiBreadcrumbs",["root","ol","li","separator"]),me=["children","className","component","slots","slotProps","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],ge=r=>{const{classes:o}=r;return Z({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},xe,o)},be=z(m,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(r,o)=>[{[`& .${he.li}`]:o.li},o.root]})({}),ve=z("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:(r,o)=>o.ol})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),je=z("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:(r,o)=>o.separator})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function ye(r,o,s,p){return r.reduce((a,h,d)=>(d<r.length-1?a=a.concat(h,e.jsx(je,{"aria-hidden":!0,className:o,ownerState:p,children:s},`separator-${d}`)):a.push(h),a),[])}const Se=c.forwardRef(function(o,s){const p=Q({props:o,name:"MuiBreadcrumbs"}),{children:a,className:h,component:d="nav",slots:b={},slotProps:A={},expandText:v="Show path",itemsAfterCollapse:j=1,itemsBeforeCollapse:x=1,maxItems:S=8,separator:I="/"}=p,O=J(p,me),[t,n]=c.useState(!1),i=g({},p,{component:d,expanded:t,expandText:v,itemsAfterCollapse:j,itemsBeforeCollapse:x,maxItems:S,separator:I}),f=ge(i),y=ne({elementType:b.CollapsedIcon,externalSlotProps:A.collapsedIcon,ownerState:i}),D=c.useRef(null),V=u=>{const M=()=>{n(!0);const E=D.current.querySelector("a[href],button,[tabindex]");E&&E.focus()};return x+j>=u.length?u:[...u.slice(0,x),e.jsx(fe,{"aria-label":v,slots:{CollapsedIcon:b.CollapsedIcon},slotProps:{collapsedIcon:y},onClick:M},"ellipsis"),...u.slice(u.length-j,u.length)]},k=c.Children.toArray(a).filter(u=>c.isValidElement(u)).map((u,M)=>e.jsx("li",{className:f.li,children:u},`child-${M}`));return e.jsx(be,g({ref:s,component:d,color:"text.secondary",className:Y(f.root,h),ownerState:i},O,{children:e.jsx(ve,{className:f.ol,ref:D,ownerState:i,children:ye(t||S&&k.length<=S?k:V(k),f.separator,I,i)})}))});var P={},$;function Ce(){if($)return P;$=1;var r=W();Object.defineProperty(P,"__esModule",{value:!0}),P.default=void 0;var o=r(U()),s=_();return P.default=(0,o.default)((0,s.jsx)("path",{d:"m12 5.69 5 4.5V18h-2v-6H9v6H7v-7.81zM12 3 2 12h3v8h6v-6h2v6h6v-8h3z"}),"HomeOutlined"),P}var Pe=Ce();const Re=F(Pe);var R={},L;function we(){if(L)return R;L=1;var r=W();Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var o=r(U()),s=_();return R.default=(0,o.default)((0,s.jsx)("path",{d:"M16.67 13.13C18.04 14.06 19 15.32 19 17v3h4v-3c0-2.18-3.57-3.47-6.33-3.87M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4c-.47 0-.91.1-1.33.24C14.5 5.27 15 6.58 15 8s-.5 2.73-1.33 3.76c.42.14.86.24 1.33.24m-6 0c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0-6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2m0 7c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4m6 5H3v-.99C3.2 16.29 6.3 15 9 15s5.8 1.29 6 2z"}),"PeopleAltOutlined"),R}var ze=we();const Ie=F(ze);var w={},G;function Be(){if(G)return w;G=1;var r=W();Object.defineProperty(w,"__esModule",{value:!0}),w.default=void 0;var o=r(U()),s=_();return w.default=(0,o.default)((0,s.jsx)("path",{d:"M19.43 12.98c.04-.32.07-.64.07-.98 0-.34-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.09-.16-.26-.25-.44-.25-.06 0-.12.01-.17.03l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.06-.02-.12-.03-.18-.03-.17 0-.34.09-.43.25l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98 0 .33.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.09.16.26.25.44.25.06 0 .12-.01.17-.03l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.06.02.12.03.18.03.17 0 .34-.09.43-.25l2-3.46c.12-.22.07-.49-.12-.64zm-1.98-1.71c.04.31.05.52.05.73 0 .21-.02.43-.05.73l-.14 1.13.89.7 1.08.84-.7 1.21-1.27-.51-1.04-.42-.9.68c-.43.32-.84.56-1.25.73l-1.06.43-.16 1.13-.2 1.35h-1.4l-.19-1.35-.16-1.13-1.06-.43c-.43-.18-.83-.41-1.23-.71l-.91-.7-1.06.43-1.27.51-.7-1.21 1.08-.84.89-.7-.14-1.13c-.03-.31-.05-.54-.05-.74s.02-.43.05-.73l.14-1.13-.89-.7-1.08-.84.7-1.21 1.27.51 1.04.42.9-.68c.43-.32.84-.56 1.25-.73l1.06-.43.16-1.13.2-1.35h1.39l.19 1.35.16 1.13 1.06.43c.43.18.83.41 1.23.71l.91.7 1.06-.43 1.27-.51.7 1.21-1.07.85-.89.7zM12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2"}),"SettingsOutlined"),w}var Ae=Be();const Oe=F(Ae),ke=[{icon:e.jsx(Re,{sx:{fontSize:28}}),label:"Dashboard",active:!0},{icon:e.jsx(Ie,{sx:{fontSize:28}}),label:"Users"},{icon:e.jsx(Oe,{sx:{fontSize:28}}),label:"Settings"}],Ve=()=>{const[r,o]=c.useState({fullName:"",email:"",phone:"",address:""}),[s,p]=c.useState(null),[a,h]=c.useState(!1),[d,b]=c.useState(null),[A,v]=c.useState(null),j=c.useRef(null),x=t=>{o({...r,[t.target.name]:t.target.value})};ee.useEffect(()=>{(async()=>{try{const i=await H("http://localhost:3000/api/users/me");if(!i.ok)throw new Error("Failed to fetch profile");const f=await i.json();p(f.data.user)}catch(n){console.error("Failed to load profile:",n)}})()},[]);const S=t=>{var y;const n=(y=t.target.files)==null?void 0:y[0];if(!n)return;if(!["image/jpeg","image/png","image/gif","image/webp"].includes(n.type)){alert("Please select a valid image file (JPEG, PNG, GIF, or WebP)");return}const f=2*1024*1024;if(n.size>f){alert("File size too large. Maximum size is 2MB");return}b(n),v(URL.createObjectURL(n))},I=async()=>{if(d){h(!0);try{const t="http://localhost:3000",n=new FormData;n.append("avatar",d);const i=await H(`${t}/api/users/me/avatar`,{method:"POST",body:n});if(!i.ok){const y=await i.json();throw new Error(y.error||"Failed to upload avatar")}const f=await i.json();v(null),b(null),alert("Avatar uploaded successfully!")}catch(t){alert(t instanceof Error?t.message:"Failed to upload avatar. Please try again.")}finally{h(!1)}}},O=()=>{var t;(t=j.current)==null||t.click()};return e.jsxs(l,{sx:{display:"flex",minHeight:"100vh",bgcolor:"#f7f8fa"},children:[e.jsxs(l,{sx:{width:120,bgcolor:"#fff",borderRight:"1px solid #f0f0f0",display:"flex",flexDirection:"column",alignItems:"center",py:3,position:"relative"},children:[e.jsx(m,{variant:"h6",sx:{fontWeight:900,color:"#b97a7a",mb:6},children:"LOGO"}),e.jsx(l,{sx:{flex:1,width:"100%"},children:ke.map(t=>e.jsxs(l,{sx:{display:"flex",flexDirection:"column",alignItems:"center",mb:4,cursor:"pointer"},children:[t.icon,e.jsx(m,{sx:{fontWeight:600,fontSize:15,color:t.active?"#2950DA":"#444",mt:1},children:t.label})]},t.label))}),e.jsx(T,{src:"https://randomuser.me/api/portraits/women/44.jpg",sx:{width:48,height:48,position:"absolute",bottom:24,left:"50%",transform:"translateX(-50%)"}})]}),e.jsxs(l,{sx:{flex:1,px:6,py:4},children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[e.jsxs(Se,{separator:"â€º","aria-label":"breadcrumb",children:[e.jsx(m,{sx:{color:"#888",fontWeight:600,fontSize:22},children:"Profile"}),e.jsx(m,{sx:{color:"#222",fontWeight:800,fontSize:26},children:"Edit Profile"})]}),e.jsx(C,{placeholder:"Search",size:"small",InputProps:{startAdornment:e.jsx(ie,{position:"start",children:e.jsx(te,{sx:{color:"#bdbdbd"}})}),sx:{borderRadius:3,bgcolor:"#fff",width:220,fontSize:16}}})]}),e.jsx(N,{elevation:0,sx:{borderRadius:3,p:0,mb:4,overflow:"hidden",bgcolor:"#F5F7FA"},children:e.jsxs(l,{sx:{display:"flex",flexDirection:"column",alignItems:"center",py:5,position:"relative",minHeight:220},children:[e.jsxs(l,{sx:{position:"relative",width:140,height:140,mb:2},children:[e.jsx(T,{src:A||se(s==null?void 0:s.avatarUrl),sx:{width:140,height:140,bgcolor:"#e6e6e6",fontSize:80},children:e.jsxs("svg",{width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("circle",{cx:"12",cy:"8",r:"4",stroke:"#222",strokeWidth:"2"}),e.jsx("path",{d:"M4 20c0-4 4-7 8-7s8 3 8 7",stroke:"#222",strokeWidth:"2"})]})}),e.jsx(l,{onClick:O,sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",bgcolor:"rgba(0,0,0,0.15)",borderRadius:"50%",transition:"background 0.2s","&:hover":{bgcolor:"rgba(0,0,0,0.25)"}},children:e.jsx(oe,{sx:{color:"#fff",fontSize:32}})})]}),d&&e.jsxs(l,{sx:{mb:2,display:"flex",flexDirection:"column",alignItems:"center",gap:1},children:[e.jsxs(m,{sx:{color:"#666",fontSize:14},children:["Selected: ",d.name]}),e.jsxs(l,{sx:{display:"flex",gap:1},children:[e.jsx(B,{variant:"contained",size:"small",disabled:a,onClick:I,sx:{bgcolor:"#2950DA",color:"#fff","&:hover":{bgcolor:"#526794"},"&:disabled":{bgcolor:"#ccc"}},children:a?e.jsxs(e.Fragment,{children:[e.jsx(re,{size:16,sx:{color:"#fff",mr:1}}),"Uploading..."]}):"Upload Avatar"}),e.jsx(B,{variant:"outlined",size:"small",disabled:a,onClick:()=>{b(null),v(null)},sx:{borderColor:"#666",color:"#666","&:hover":{borderColor:"#333",color:"#333"}},children:"Cancel"})]})]})]})}),e.jsxs(N,{elevation:0,sx:{borderRadius:3,p:4,maxWidth:900,mx:"auto",position:"relative"},children:[e.jsxs(l,{sx:{display:"flex",justifyContent:"flex-end",gap:2,mb:2},children:[e.jsx(B,{variant:"contained",sx:{bgcolor:"#bdbdbd",color:"#fff",fontWeight:700,borderRadius:2,px:4,py:1,fontSize:16,textTransform:"none",boxShadow:"none","&:hover":{bgcolor:"#a0a0a0"}},children:"Cancel"}),e.jsx(B,{variant:"contained",sx:{bgcolor:"#2950DA",color:"#fff",fontWeight:700,borderRadius:2,px:4,py:1,fontSize:16,textTransform:"none",boxShadow:"none","&:hover":{bgcolor:"#526794"}},children:"Save Changes"})]}),e.jsxs(l,{sx:{display:"flex",gap:4,flexWrap:"wrap"},children:[e.jsx(l,{sx:{flex:1,minWidth:220},children:e.jsx(m,{sx:{fontWeight:700,fontSize:18,color:"#888",mb:2},children:"Personal Information"})}),e.jsxs(l,{sx:{flex:3,minWidth:320,display:"flex",flexDirection:"column",gap:2},children:[e.jsx(C,{label:"Full name",name:"fullName",value:r.fullName,onChange:x,fullWidth:!0,sx:{bgcolor:"#fafbfc",borderRadius:2}}),e.jsx(C,{label:"Email",name:"email",value:r.email,onChange:x,fullWidth:!0,sx:{bgcolor:"#fafbfc",borderRadius:2}}),e.jsx(C,{label:"Phone No.",name:"phone",value:r.phone,onChange:x,fullWidth:!0,sx:{bgcolor:"#fafbfc",borderRadius:2}}),e.jsx(C,{label:"Address",name:"address",value:r.address,onChange:x,fullWidth:!0,multiline:!0,minRows:2,sx:{bgcolor:"#fafbfc",borderRadius:2}})]})]})]})]}),e.jsx("input",{type:"file",ref:j,onChange:S,accept:"image/jpeg,image/png,image/gif,image/webp",style:{display:"none"}})]})};export{Ve as default};
