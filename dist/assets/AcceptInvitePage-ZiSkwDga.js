import{p as f,r,k as g,j as e,B as c,C as p,T as l}from"./index-TH8YGKRz.js";import{B as h}from"./Button-CJZqiG46.js";const I=()=>{const[d]=f(),n=d.get("token"),[u,s]=r.useState(!0),[a,t]=r.useState(""),o=g();return r.useEffect(()=>{(async()=>{if(!n){t("No invitation token provided."),s(!1);return}try{let i="";try{i=JSON.parse(localStorage.getItem("user")||"{}").id||""}catch{}if(!i){t("You must be logged in to accept an invite."),s(!1);return}(await fetch("http://localhost:3000/api/invites/accept",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:n,userId:i})})).ok?o("/dashboard"):t("Invalid or expired invitation link.")}catch{t("Something went wrong. Please try again.")}finally{s(!1)}})()},[n]),u?e.jsxs(c,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"60vh"},children:[e.jsx(p,{}),e.jsx(l,{sx:{mt:2},children:"Validating invitation..."})]}):a?e.jsxs(c,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"60vh"},children:[e.jsx(l,{color:"error",sx:{mb:2},children:a}),e.jsx(h,{variant:"contained",onClick:()=>o("/login"),children:"Go to Login"})]}):null};export{I as default};
