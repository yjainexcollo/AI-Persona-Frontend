import{g as K,a as Z,r as j,u as ee,_ as se,b as R,j as e,s as te,c as oe,e as re,R as ie,B as r,T as k,m as $,k as V,l as ne}from"./index-TH8YGKRz.js";import{H as T}from"./Header-DEoxuOro.js";import{S as ae}from"./SearchBar-BX2JT_VK.js";import{C as B}from"./Chip-DQa8OeN4.js";import{I as F}from"./IconButton-BAp8iDOQ.js";import{c as P}from"./createSvgIcon-1GfyKPJS.js";import{M as le}from"./Menu-CzX3FVwN.js";import{M as _}from"./AdminSidebar-Bc6icHTo.js";import{F as ce}from"./FormControlLabel-Cn76TRpS.js";import{C as xe}from"./Checkbox-Ck6fmr8t.js";import{u as L}from"./Divider-7QTrz6EV.js";import{C as me,a as de}from"./CardContent-CuJeD_yf.js";import{G}from"./Grid-M9g4rATc.js";import{C as pe}from"./ChevronLeft-Cxf_Y_9m.js";import{B as O}from"./Button-CJZqiG46.js";import{g as he}from"./personaService-jUulqpt0.js";import{C as H}from"./Container-DiviWFfv.js";import"./index-DVvKU7GF.js";import"./Paper-Mdtt8qvf.js";import"./SettingsPage-BRJXZXmu.js";import"./createSvgIcon-B0Pm_6cI.js";import"./useControlled-BLQOo7Av.js";import"./tokens-DkKdY8jA.js";import"./workspaceService-BQTsMTjt.js";import"./SwitchBase-GCTxqK2a.js";import"./TextField-Du34Z7EL.js";import"./resolveComponentProps-CAz9EWAT.js";import"./DialogTitle-CKHsR478.js";import"./Alert-DkG2QiTi.js";import"./useSlot-B20WKvL2.js";import"./avatarService-BCG4JWCu.js";import"./Stack-DgAhbvWb.js";import"./useThemeProps-vG6R4auE.js";import"./getThemeProps-DA88l0eV.js";import"./InputAdornment-Cgg0GFqY.js";import"./Avatar-BgeWc8dC.js";import"./ListItemText-DxyF1s_P.js";function fe(s){return K("MuiCardMedia",s)}Z("MuiCardMedia",["root","media","img"]);const ue=["children","className","component","image","src","style"],ge=s=>{const{classes:t,isMediaComponent:n,isImageComponent:c}=s;return re({root:["root",n&&"media",c&&"img"]},fe,t)},be=te("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(s,t)=>{const{ownerState:n}=s,{isMediaComponent:c,isImageComponent:h}=n;return[t.root,c&&t.media,h&&t.img]}})(({ownerState:s})=>R({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},s.isMediaComponent&&{width:"100%"},s.isImageComponent&&{objectFit:"cover"})),ve=["video","audio","picture","iframe","img"],Ce=["picture","img"],je=j.forwardRef(function(t,n){const c=ee({props:t,name:"MuiCardMedia"}),{children:h,className:g,component:f="div",image:m,src:d,style:u}=c,a=se(c,ue),x=ve.indexOf(f)!==-1,l=!x&&m?R({backgroundImage:`url("${m}")`},u):u,v=R({},c,{component:f,isMediaComponent:x,isImageComponent:Ce.indexOf(f)!==-1}),S=ge(v);return e.jsx(be,R({className:oe(S.root,g),as:f,role:!x&&m?"img":void 0,ref:n,style:l,ownerState:v,src:x?m||d:void 0},a,{children:h}))}),ye=P(e.jsx("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight"),we=P(e.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear"),ke=P(e.jsx("path",{d:"M10 18h4v-2h-4zM3 6v2h18V6zm3 7h12v-2H6z"}),"FilterList"),Se=["All","Tech","Marketing","Sales"],Me=({filters:s,onFilterChange:t,showSelectedIndicator:n=!1,showClearAll:c=!0,title:h="Department Filters"})=>{var D;const[g,f]=ie.useState(null),m=!!g,d=o=>{f(o.currentTarget)},u=()=>{f(null)},a=s.filter(o=>o.active),x=a.length>0,l=a.length===0,v=()=>{s.forEach(o=>{o.active&&t(o.value)})},S=()=>{x&&v()},W=o=>{t(o)},I=o=>{switch(o){case"Tech":case"Technology":return"#2950DA";case"Marketing":return"#2950DA";case"Sales":return"#2950DA";case"All":return"#2950DA";default:return"#2950DA"}},A=o=>{var y;return o==="All"?l:((y=s.find(M=>M.value===o))==null?void 0:y.active)||!1};return e.jsx(r,{sx:{width:"100%"},children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:{xs:1,sm:2},flexWrap:"wrap",mb:n&&x?2:0},children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:{xs:1,sm:1},flexWrap:"wrap",flex:1},children:[l&&e.jsx(B,{label:"All Departments",variant:"filled",sx:{backgroundColor:"#E8ECF2",color:"#222",fontWeight:600,borderRadius:2,fontSize:{xs:"13px",sm:"14px"},height:{xs:32,sm:36},"& .MuiChip-label":{px:{xs:1,sm:1.5}},"& .MuiChip-deleteIcon":{color:"#222","&:hover":{color:"#526794"}},boxShadow:"0 0 0 2px #E8ECF220"}}),s.map(o=>o.active&&e.jsx(B,{label:o.label,onClick:()=>t(o.value),onDelete:()=>t(o.value),variant:"filled",sx:{backgroundColor:"#E8ECF2",color:"#2950DA",fontWeight:600,borderRadius:2,fontSize:{xs:"13px",sm:"14px"},height:{xs:32,sm:36},transition:"all 0.2s ease-in-out","&:hover":{backgroundColor:"#E8ECF2",transform:"translateY(-1px)",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},"& .MuiChip-label":{px:{xs:1,sm:1.5}},"& .MuiChip-deleteIcon":{color:"#2950DA","&:hover":{color:"#526794"}},boxShadow:"0 0 0 2px #E8ECF220"}},o.value))]}),e.jsx(F,{sx:{color:x?I((D=a[0])==null?void 0:D.value):"#2950DA",backgroundColor:x?"#f5f5f5":"transparent",ml:{xs:.5,sm:1},transition:"all 0.2s ease-in-out","&:hover":{backgroundColor:"#f0f0f0",transform:"rotate(90deg)"},width:{xs:40,sm:36},height:{xs:40,sm:36}},onClick:d,"aria-controls":m?"filter-menu":void 0,"aria-haspopup":"true","aria-expanded":m?"true":void 0,children:e.jsx(ke,{sx:{fontSize:{xs:22,sm:20}}})}),c&&x&&e.jsx(F,{onClick:v,sx:{color:"#666",backgroundColor:"#f5f5f5",ml:.5,transition:"all 0.2s ease-in-out","&:hover":{backgroundColor:"#ffebee",color:"#d32f2f",transform:"scale(1.1)"},width:{xs:32,sm:28},height:{xs:32,sm:28}},title:"Clear all filters",children:e.jsx(we,{sx:{fontSize:{xs:18,sm:16}}})}),e.jsxs(le,{id:"filter-menu",anchorEl:g,open:m,onClose:u,PaperProps:{sx:{mt:1.5,minWidth:200,borderRadius:3,boxShadow:"0 4px 24px rgba(44,62,80,0.13)",maxHeight:320,overflowY:"auto",p:1}},anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[e.jsx(_,{sx:{fontSize:14,py:1,px:1.5,borderRadius:2,color:"#333",fontWeight:600,"&:hover":{backgroundColor:"transparent"},cursor:"default"},disabled:!0,children:h}),Se.map((o,y)=>{const M=A(o);return e.jsx(_,{onClick:C=>{if(C.preventDefault(),C.stopPropagation(),o==="All")S();else{const E=s.find(N=>N.value===o);E&&W(E.value)}},sx:{fontSize:14,py:.5,px:1,borderRadius:2,whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:1,"&:hover":{backgroundColor:"#f0f0f0"},cursor:"pointer",userSelect:"none"},children:e.jsx(ce,{control:e.jsx(xe,{checked:M,size:"small",sx:{color:"#2950DA","&.Mui-checked":{color:"#2950DA"},"&:hover":{backgroundColor:"rgba(41, 80, 218, 0.04)"},"& .MuiSvgIcon-root":{fontSize:18},pointerEvents:"none"},onChange:()=>{}}),label:e.jsx(k,{sx:{fontSize:14,fontWeight:500},children:o==="All"?"All Departments":`${o} Department`}),sx:{margin:0,width:"100%","& .MuiFormControlLabel-label":{flex:1},pointerEvents:"none"},onClick:C=>{C.preventDefault(),C.stopPropagation()}})},y)})]})]})})},Ie=({persona:s,onStartChat:t,onViewPersona:n,cardFullWidth:c})=>{const h=$(),g=L(h.breakpoints.down("sm")),f=L(h.breakpoints.down("md")),m=V(),d=!!(s.name&&String(s.name).trim().length),u=a=>{a.stopPropagation(),n?n(s):m(`/view-persona/${s.id}`)};return e.jsxs(me,{sx:{borderRadius:2,width:c?"100%":{xs:"100%",sm:240,md:270,lg:250},maxWidth:c?"100%":{xs:320,sm:240,md:270,lg:250},backgroundColor:"transparent",boxShadow:"none",transition:"transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out",cursor:"pointer",position:"relative",overflow:"visible","&:hover":{transform:"translateY(-2px)","& .persona-image":{boxShadow:"0 4px 16px rgba(0,0,0,0.15)"},"& .persona-image-overlay":{opacity:1},"& .start-chat-text":{opacity:1,pointerEvents:"auto",color:"white"}},"&:has(.role-link:hover)":{transform:"none","& .persona-image":{boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},"& .persona-image-overlay":{opacity:0},"& .start-chat-text":{opacity:0,pointerEvents:"none"}}},onClick:()=>t==null?void 0:t(s),children:[e.jsxs(r,{sx:{position:"relative"},children:[e.jsx(je,{component:"img",height:g?"250":f?"230":"210",image:s.avatarUrl||s.avatar||"",alt:s.name,className:"persona-image",sx:{objectFit:"cover",objectPosition:"top center",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",transition:"box-shadow 0.2s ease-in-out",width:"100%"}}),e.jsx(r,{className:"persona-image-overlay",sx:{position:"absolute",top:0,left:0,right:0,bottom:0,borderRadius:"8px",background:"rgba(0,0,0,0.25)",opacity:0,transition:"opacity 0.2s",zIndex:1,pointerEvents:"none"}}),e.jsx(r,{className:"start-chat-text",sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",opacity:0,pointerEvents:"none",transition:"opacity 0.2s, color 0.2s",zIndex:2,fontWeight:600,fontSize:{xs:"14px",sm:"15px"},color:"white",userSelect:"none",cursor:"pointer","&:hover":{color:"#2950DA"}},onClick:a=>{a.stopPropagation(),t==null||t(s)},children:"Start Chat"})]}),e.jsxs(de,{sx:{p:{xs:1.5,sm:2},pt:{xs:1,sm:1.5},pb:"0px !important",background:"transparent"},children:[e.jsx(k,{variant:"h6",component:"h3",sx:{fontFamily:"Inter, Roboto, Helvetica, Arial, sans-serif",fontWeight:500,fontSize:{xs:"15px",sm:"16px"},lineHeight:{xs:"20px",sm:"24px"},letterSpacing:0,color:"#333",textAlign:{xs:"center",sm:"left"},mb:.5,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"normal"},children:s.personalName||s.name}),d&&e.jsx(r,{className:"role-link",onClick:u,sx:{display:"inline-flex",alignItems:"flex-end",justifyContent:{xs:"center",sm:"flex-start"},gap:.5,cursor:"pointer",transition:"color 0.2s ease-in-out",color:"#2950DA",position:"relative",zIndex:10,"&:hover":{color:"#2950DA"}},children:e.jsx(k,{variant:"body2",sx:{fontFamily:"Inter, Roboto, Helvetica, Arial, sans-serif",fontWeight:400,fontSize:{xs:"13px",sm:"14px"},lineHeight:1.5,letterSpacing:0,color:"inherit"},children:s.name})})]})]})},Ae=({personas:s,onStartChat:t,onViewPersona:n})=>e.jsx(r,{sx:{flexGrow:1,py:{xs:1,sm:-1,md:-1},px:0,width:"100%",maxWidth:1200},children:e.jsx(G,{container:!0,spacing:{xs:2,sm:3,md:4},justifyContent:"flex-start",sx:{width:"100%",margin:0},children:s.map(c=>e.jsx(G,{item:!0,xs:12,sm:6,md:3,sx:{width:"100%"},children:e.jsx(Ie,{persona:c,onStartChat:t,onViewPersona:n,cardFullWidth:!0})},c.id))})}),De=({currentPage:s,totalPages:t,onPageChange:n})=>{const c=$(),h=L(c.breakpoints.down("sm")),g=()=>{s>1&&n(s-1)},f=()=>{s<t&&n(s+1)},m=()=>{const d=[],u=h?5:7;let a=Math.max(1,s-Math.floor(u/2));const x=Math.min(t,a+u-1);x-a+1<u&&(a=Math.max(1,x-u+1)),a>1&&(d.push(e.jsx(O,{onClick:()=>n(1),variant:"text","aria-label":"Go to page 1",sx:{minWidth:{xs:36,sm:40},height:{xs:36,sm:40},borderRadius:1,mx:{xs:.25,sm:.5},backgroundColor:"transparent",color:"#666",fontWeight:500,fontSize:{xs:14,sm:16},"&:hover":{backgroundColor:"#f5f5f5"}},children:"1"},1)),a>2&&d.push(e.jsx(r,{sx:{mx:{xs:.25,sm:.5},color:"#666",fontSize:{xs:14,sm:16},display:"flex",alignItems:"center"},children:"..."},"ellipsis1")));for(let l=a;l<=x;l++)d.push(e.jsx(O,{onClick:()=>n(l),variant:s===l?"contained":"text","aria-label":`Go to page ${l}`,"aria-current":s===l?"page":void 0,sx:{minWidth:{xs:36,sm:40},height:{xs:36,sm:40},borderRadius:1,mx:{xs:.25,sm:.5},backgroundColor:s===l?"#2950DA":"transparent",color:s===l?"white":"#666",fontWeight:500,fontSize:{xs:14,sm:16},"&:hover":{backgroundColor:s===l?"#526794":"#f5f5f5"}},children:l},l));return x<t&&(x<t-1&&d.push(e.jsx(r,{sx:{mx:{xs:.25,sm:.5},color:"#666",fontSize:{xs:14,sm:16},display:"flex",alignItems:"center"},children:"..."},"ellipsis2")),d.push(e.jsx(O,{onClick:()=>n(t),variant:"text","aria-label":`Go to page ${t}`,sx:{minWidth:{xs:36,sm:40},height:{xs:36,sm:40},borderRadius:1,mx:{xs:.25,sm:.5},backgroundColor:"transparent",color:"#666",fontWeight:500,fontSize:{xs:14,sm:16},"&:hover":{backgroundColor:"#f5f5f5"}},children:t},t))),d};return e.jsx(r,{component:"nav","aria-label":"Pagination",sx:{mt:{xs:4,sm:6},mb:{xs:3,sm:4}},children:e.jsx(r,{sx:{display:"flex",alignItems:"center",justifyContent:"center",flex:1,mx:{xs:2,sm:4}},children:e.jsxs(r,{sx:{display:"flex",justifyContent:"center",alignItems:"center",maxWidth:{xs:"100%",sm:900},width:"100%",flexWrap:"wrap"},children:[e.jsx(F,{onClick:g,disabled:s===1,"aria-label":"Previous page",sx:{mr:{xs:.5,sm:1},color:s===1?"#ccc":"#666",width:{xs:36,sm:40},height:{xs:36,sm:40},"&:hover":{backgroundColor:s===1?"transparent":"#f5f5f5"}},children:e.jsx(pe,{sx:{fontSize:{xs:20,sm:24}}})}),m(),e.jsx(F,{onClick:f,disabled:s===t,"aria-label":"Next page",sx:{ml:{xs:.5,sm:1},color:s===t?"#ccc":"#666",width:{xs:36,sm:40},height:{xs:36,sm:40},"&:hover":{backgroundColor:s===t?"transparent":"#f5f5f5"}},children:e.jsx(ye,{sx:{fontSize:{xs:20,sm:24}}})})]})})})},We=[{label:"Tech",value:"Tech",active:!0},{label:"Marketing",value:"Marketing",active:!1},{label:"Sales",value:"Sales",active:!1}],w={xs:"100%",sm:640,md:900,lg:1200},U=["Tech","Marketing","Sales"],hs=({onStartChat:s})=>{const t=V(),n=ne(),h=new URLSearchParams(n.search).get("search")||"",[g,f]=j.useState(h),[m,d]=j.useState(We.map(i=>({...i,active:!1}))),[u,a]=j.useState([]),[x,l]=j.useState(!0),[v,S]=j.useState(""),[W,I]=j.useState(1),A=12;j.useEffect(()=>{async function i(){try{l(!0),S("");const p=await he();a(p.data||[])}catch(p){console.error("Error fetching personas from backend:",p),S(p instanceof Error?p.message:"Failed to load personas"),a([])}finally{l(!1)}}i()},[]);const D=m.filter(i=>i.active),o=u.filter(i=>{const p=g.trim().toLowerCase(),b=((i.name??"")+" "+(i.personalName??"")+" "+(i.description??"")).toLowerCase(),z=p===""||b.includes(p),Q=D.length===0||D.some(J=>J.value===i.department);return z&&Q}).sort((i,p)=>{if(i.department&&p.department){const b=U.indexOf(i.department),z=U.indexOf(p.department);if(b!==z)return b-z}return i.name.localeCompare(p.name)}),y=o.length,M=Math.ceil(y/A),C=(W-1)*A,E=o.slice(C,C+A),N=i=>{d(p=>p.map(b=>b.value===i?{...b,active:!b.active}:b)),I(1)},X=i=>{f(i),I(1)},Y=i=>{I(i)},q=i=>{t(`/view-persona/${i.id}`)};return x?e.jsxs(r,{sx:{minHeight:"100vh",bgcolor:"background.default",overflowX:"hidden",position:"relative"},children:[e.jsx(T,{}),e.jsx(H,{maxWidth:!1,sx:{py:{xs:2,sm:3,md:5},px:{xs:1.5,sm:3,md:4},maxWidth:w,display:"flex",flexDirection:"column",alignItems:"center"},children:e.jsx(r,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:{xs:"40vh",md:"60vh"}},children:e.jsx(k,{children:"Loading personas..."})})})]}):v?e.jsxs(r,{sx:{minHeight:"100vh",bgcolor:"background.default",overflowX:"hidden",position:"relative"},children:[e.jsx(T,{}),e.jsx(H,{maxWidth:!1,sx:{py:{xs:2,sm:3,md:5},px:{xs:1.5,sm:3,md:4},maxWidth:w,display:"flex",flexDirection:"column",alignItems:"center"},children:e.jsx(r,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:{xs:"40vh",md:"60vh"}},children:e.jsx(k,{color:"error",textAlign:"center",children:v})})})]}):e.jsxs(r,{sx:{minHeight:"100vh",bgcolor:"background.default",overflowX:"hidden",position:"relative"},children:[e.jsx(T,{}),e.jsxs(H,{maxWidth:!1,sx:{py:{xs:2,sm:3,md:5},px:{xs:1.5,sm:3,md:4},maxWidth:w,display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(r,{sx:{width:"100%",maxWidth:w,mb:{xs:2,sm:3}},children:e.jsx(r,{sx:{display:"flex",justifyContent:"center",width:"100%"},children:e.jsx(ae,{value:g,onChange:X,maxWidth:"100%",fullWidth:!0})})}),e.jsx(r,{sx:{width:"100%",maxWidth:w,mb:{xs:2,sm:3}},children:e.jsx(Me,{filters:m,onFilterChange:N,showSelectedIndicator:!0,showClearAll:!0,title:"Filter by Department"})}),e.jsx(r,{sx:{width:"100%",maxWidth:w,mb:{xs:1,sm:2},display:"flex",justifyContent:"space-between",alignItems:"center"}}),e.jsx(r,{sx:{width:"100%",maxWidth:w,display:"flex",justifyContent:"flex-start"},children:y>0?e.jsx(Ae,{personas:E,onStartChat:s,onViewPersona:q}):e.jsxs(r,{sx:{textAlign:"center",py:{xs:6,sm:8},px:2,width:"100%"},children:[e.jsx(k,{variant:"h6",sx:{color:"#666",mb:1},children:"No personas found"}),e.jsx(k,{variant:"body2",sx:{color:"#999"},children:"Try adjusting your search or filters"})]})}),M>1&&e.jsx(r,{sx:{display:"flex",justifyContent:"center",mt:{xs:3,sm:4},mb:{xs:2,sm:4}},children:e.jsx(De,{currentPage:W,totalPages:M,onPageChange:Y})})]})]})};export{hs as default};
